{
  "lote": 4,
  "status": "pending",
  "file_path": "src/app/components/AdminDashboard.tsx",
  "created_at": "2026-02-27T05:36:26.152Z",
  "file_content": "import { useState, useEffect, useCallback } from \"react\";\nimport {\n  ArrowLeft, Users, Shield, Flag, Award, BarChart3, MessageSquare,\n  AlertTriangle, CheckCircle, XCircle, Eye, Globe, Calendar, FileText,\n  Link2, Settings, Megaphone, BookOpen, Sparkles, TrendingUp,\n  UserPlus, UserMinus, Ban, Edit3, Trash2, Plus, RefreshCw,\n  Copy, Check, ExternalLink, Search, ChevronDown, Activity, Zap,\n  Heart, Star, Crown, Bell, UserCheck, Clock, ShieldAlert, Flame\n} from \"lucide-react\";\nimport {\n  supabase, useProfileContext, useSeats, isSuperAdmin,\n  useModerationActions, ACTION_TYPE_LABELS, REPORT_TYPE_LABELS,\n  BADGE_CONFIG, useCommunitiesContext, useInviteLinks, EVENT_TYPE_LABELS\n} from \"../../lib\";\nimport type { ModerationActionType, ReportType, BadgeType, EventWithMeta, CommunityWithMeta } from \"../../lib\";\nimport { UserAvatar } from \"./UserAvatar\";\nimport { RituaisPanel } from \"./RituaisPanel\";\nimport { InboxPanel } from \"./InboxPanel\";\nimport { InvestorDashboard } from \"./InvestorDashboard\";\n\ninterface AdminDashboardProps {\n  onBack: () => void;\n  onNavigateToProfile?: (userId: string) => void;\n}\n\ntype AdminTab = \"overview\" | \"users\" | \"communities\" | \"events\" | \"content\" | \"reports\" | \"moderation\" | \"badges\" | \"invites\" | \"approvals\" | \"rituals\" | \"inbox\" | \"investor\";\n\ninterface PlatformStats {\n  totalUsers: number;\n  totalPosts: number;\n  totalComments: number;\n  totalEvents: number;\n  totalReports: number;\n  pendingReports: number;\n  criticalReports: number;\n  activeConnections: number;\n  totalCommunities: number;\n  totalLives: number;\n  totalMessages: number;\n}\n\ninterface AdminUser {\n  id: string;\n  name: string;\n  display_name: string;\n  legal_name: string | null;\n  role: string;\n  profile_photo: string | null;\n  created_at: string;\n  last_active_at: string | null;\n  is_public_profile: boolean;\n  participation_score: number;\n  bio: string | null;\n  onboarding_done: boolean;\n  leadership_onboarding_done: boolean;\n}\n\ninterface AdminReport {\n  id: string;\n  reporter_id: string;\n  reported_user_id: string | null;\n  reported_content_id: string | null;\n  reported_content_type: string | null;\n  report_type: string;\n  severity: string;\n  description: string | null;\n  status: string;\n  created_at: string;\n  reporter_name?: string;\n  reported_user_name?: string;\n}\n\ninterface Announcement {\n  id: string;\n  title: string;\n  content: string;\n  type: string;\n  is_active: boolean;\n  priority: number;\n  created_at: string;\n}\n\nexport function AdminDashboard({ onBack, onNavigateToProfile }: AdminDashboardProps) {\n  const { user } = useProfileContext();\n  const { seatsUsed, seatsTotal, realMax, realRemaining, refreshSeats } = useSeats();\n  const { actions, isLoading: actionsLoading, logAction } = useModerationActions();\n  const { communities } = useCommunitiesContext();\n  const { links: inviteLinks, isLoading: invitesLoading, createInviteLink, deactivateLink, getInviteURL } = useInviteLinks();\n  const [activeTab, setActiveTab] = useState<AdminTab>(\"overview\");\n  const [stats, setStats] = useState<PlatformStats | null>(null);\n  const [users, setUsers] = useState<AdminUser[]>([]);\n  const [reports, setReports] = useState<AdminReport[]>([]);\n  const [announcements, setAnnouncements] = useState<Announcement[]>([]);\n  const [events, setEvents] = useState<EventWithMeta[]>([]);\n  const [loadingStats, setLoadingStats] = useState(true);\n  const [loadingUsers, setLoadingUsers] = useState(false);\n  const [loadingReports, setLoadingReports] = useState(false);\n  const [loadingAnnouncements, setLoadingAnnouncements] = useState(false);\n  const [loadingEvents, setLoadingEvents] = useState(false);\n  const [userSearch, setUserSearch] = useState(\"\");\n  const [roleFilter, setRoleFilter] = useState(\"all\");\n  const [copiedId, setCopiedId] = useState<string | null>(null);\n\n  // Security check\n  if (!isSuperAdmin(user?.role)) {\n    return (\n      <div className=\"min-h-screen bg-black flex items-center justify-center\">\n        <div className=\"text-center\">\n          <Shield className=\"w-12 h-12 text-[#C8102E] mx-auto mb-3\" />\n          <p className=\"text-white/60\">Acesso restrito a super_admin.</p>\n          <button onClick={onBack} className=\"mt-4 text-[#81D8D0] hover:underline text-sm\">Voltar</button>\n        </div>\n      </div>\n    );\n  }\n\n  // â•â•â• DATA LOADING â•â•â•\n\n  useEffect(() => {\n    async function loadStats() {\n      setLoadingStats(true);\n      try {\n        const [usersCount, postsCount, commentsCount, eventsCount, reportsAll, reportsPending, reportsCritical, connectionsCount, communitiesCount, livesCount, messagesCount] = await Promise.all([\n          supabase.from(\"users\").select(\"*\", { count: \"exact\", head: true }),\n          supabase.from(\"posts\").select(\"*\", { count: \"exact\", head: true }),\n          supabase.from(\"comments\").select(\"*\", { count: \"exact\", head: true }),\n          supabase.from(\"events\").select(\"*\", { count: \"exact\", head: true }),\n          supabase.from(\"reports\").select(\"*\", { count: \"exact\", head: true }),\n          supabase.from(\"reports\").select(\"*\", { count: \"exact\", head: true }).eq(\"status\", \"pending\"),\n          supabase.from(\"reports\").select(\"*\", { count: \"exact\", head: true }).eq(\"status\", \"pending\").eq(\"severity\", \"critical\"),\n          supabase.from(\"connections\").select(\"*\", { count: \"exact\", head: true }).eq(\"status\", \"accepted\"),\n          supabase.from(\"communities\").select(\"*\", { count: \"exact\", head: true }),\n          supabase.from(\"events\").select(\"*\", { count: \"exact\", head: true }).eq(\"event_type\", \"live\"),\n          supabase.from(\"private_messages\").select(\"*\", { count: \"exact\", head: true }),\n        ]);\n        setStats({\n          totalUsers: usersCount.count || 0,\n          totalPosts: postsCount.count || 0,\n          totalComments: commentsCount.count || 0,\n          totalEvents: eventsCount.count || 0,\n          totalReports: reportsAll.count || 0,\n          pendingReports: reportsPending.count || 0,\n          criticalReports: reportsCritical.count || 0,\n          activeConnections: connectionsCount.count || 0,\n          totalCommunities: communitiesCount.count || 0,\n          totalLives: livesCount.count || 0,\n          totalMessages: messagesCount.count || 0,\n        });\n      } catch (err) {\n        console.error(\"[Admin] Erro stats:\", err);\n      } finally {\n        setLoadingStats(false);\n      }\n    }\n    loadStats();\n  }, []);\n\n  const loadUsers = useCallback(async () => {\n    setLoadingUsers(true);\n    try {\n      let query = supabase\n        .from(\"users\")\n        .select(\"id, name, display_name, legal_name, role, profile_photo, created_at, last_active_at, is_public_profile, participation_score, bio, onboarding_done, leadership_onboarding_done\")\n        .order(\"created_at\", { ascending: false })\n        .limit(200);\n      if (roleFilter !== \"all\") query = query.eq(\"role\", roleFilter);\n      const { data, error } = await query;\n      if (error) throw error;\n      setUsers((data || []) as AdminUser[]);\n    } catch (err) {\n      console.error(\"[Admin] Erro users:\", err);\n    } finally {\n      setLoadingUsers(false);\n    }\n  }, [roleFilter]);\n\n  useEffect(() => { if (activeTab === \"users\") loadUsers(); }, [activeTab, loadUsers]);\n\n  const loadReports = useCallback(async () => {\n    setLoadingReports(true);\n    try {\n      const { data, error } = await supabase.from(\"reports\").select(\"*\").order(\"created_at\", { ascending: false }).limit(50);\n      if (error) throw error;\n      const userIds = [...new Set((data || []).flatMap((r: any) => [r.reporter_id, r.reported_user_id].filter(Boolean)))];\n      let usersMap: Record<string, string> = {};\n      if (userIds.length > 0) {\n        const { data: usersData } = await supabase.from(\"users\").select(\"id, name\").in(\"id\", userIds);\n        (usersData || []).forEach((u: any) => { usersMap[u.id] = u.name; });\n      }\n      setReports((data || []).map((r: any) => ({\n        ...r,\n        reporter_name: usersMap[r.reporter_id] || \"Desconhecido\",\n        reported_user_name: r.reported_user_id ? (usersMap[r.reported_user_id] || \"Desconhecido\") : null,\n      })));\n    } catch (err) {\n      console.error(\"[Admin] Erro reports:\", err);\n    } finally {\n      setLoadingReports(false);\n    }\n  }, []);\n\n  useEffect(() => { if (activeTab === \"reports\") loadReports(); }, [activeTab, loadReports]);\n\n  const loadAnnouncements = useCallback(async () => {\n    setLoadingAnnouncements(true);\n    try {\n      const { data, error } = await supabase.from(\"home_announcements\").select(\"*\").order(\"priority\", { ascending: false }).limit(30);\n      if (error) throw error;\n      setAnnouncements((data || []) as Announcement[]);\n    } catch (err) {\n      console.error(\"[Admin] Erro announcements:\", err);\n    } finally {\n      setLoadingAnnouncements(false);\n    }\n  }, []);\n\n  useEffect(() => { if (activeTab === \"content\") loadAnnouncements(); }, [activeTab, loadAnnouncements]);\n\n  const loadEvents = useCallback(async () => {\n    setLoadingEvents(true);\n    try {\n      const { data, error } = await supabase\n        .from(\"events\")\n        .select(\"*, host:users!events_host_id_fkey(name, profile_photo)\")\n        .order(\"starts_at\", { ascending: false })\n        .limit(50);\n      if (error) throw error;\n      setEvents((data || []).map((e: any) => ({\n        ...e,\n        host_name: e.host?.name || \"Desconhecido\",\n        host_photo: e.host?.profile_photo || null,\n        community_name: null,\n        participant_count: 0,\n        is_participating: false,\n        my_status: null,\n      })));\n    } catch (err) {\n      console.error(\"[Admin] Erro events:\", err);\n    } finally {\n      setLoadingEvents(false);\n    }\n  }, []);\n\n  useEffect(() => { if (activeTab === \"events\") loadEvents(); }, [activeTab, loadEvents]);\n\n  // â•â•â• ACTIONS â•â•â•\n\n  const changeUserRole = async (userId: string, newRole: string) => {\n    if (!confirm(`Mudar role para \"${newRole}\"?`)) return;\n    try {\n      await supabase.from(\"users\").update({ role: newRole, access_released: newRole !== \"visitor\" }).eq(\"id\", userId);\n      await logAction({ targetUserId: userId, actionType: \"warning\", reason: `Role alterado para ${newRole} pela admin.` });\n      await loadUsers();\n      await refreshSeats();\n    } catch (err) {\n      console.error(\"[Admin] Erro ao mudar role:\", err);\n    }\n  };\n\n  const resetLeadershipOnboarding = async (userId: string, userName: string) => {\n    if (!confirm(`Resetar onboarding de lideranca de \"${userName}\"? A pessoa precisara refazer o fluxo.`)) return;\n    try {\n      await supabase.from(\"users\").update({ leadership_onboarding_done: false }).eq(\"id\", userId);\n      await logAction({ targetUserId: userId, actionType: \"warning\", reason: `Onboarding de lideranca resetado pela admin.` });\n      await loadUsers();\n    } catch (err) {\n      console.error(\"[Admin] Erro ao resetar leadership onboarding:\", err);\n    }\n  };\n\n  const resolveReport = async (reportId: string, action: \"resolved\" | \"dismissed\") => {\n    try {\n      await supabase.from(\"reports\").update({ status: action, resolved_at: new Date().toISOString() }).eq(\"id\", reportId);\n      const report = reports.find(r => r.id === reportId);\n      if (report) {\n        await logAction({ targetUserId: report.reported_user_id || undefined, actionType: action === \"resolved\" ? \"report_resolved\" : \"report_dismissed\", reason: `Denuncia ${action === \"resolved\" ? \"resolvida\" : \"dispensada\"}: ${report.report_type}` });\n      }\n      await loadReports();\n    } catch (err) {\n      console.error(\"[Admin] Erro ao resolver:\", err);\n    }\n  };\n\n  const toggleAnnouncement = async (id: string, isActive: boolean) => {\n    try {\n      await supabase.from(\"home_announcements\").update({ is_active: !isActive }).eq(\"id\", id);\n      await loadAnnouncements();\n    } catch (err) {\n      console.error(\"[Admin] Erro toggle anuncio:\", err);\n    }\n  };\n\n  const deleteEvent = async (eventId: string) => {\n    if (!confirm(\"Excluir este evento permanentemente?\")) return;\n    try {\n      await supabase.from(\"events\").delete().eq(\"id\", eventId);\n      await loadEvents();\n    } catch (err) {\n      console.error(\"[Admin] Erro ao excluir evento:\", err);\n    }\n  };\n\n  const copyToClipboard = (text: string, id: string) => {\n    navigator.clipboard.writeText(text);\n    setCopiedId(id);\n    setTimeout(() => setCopiedId(null), 2000);\n  };\n\n  const filteredUsers = userSearch\n    ? users.filter(u => u.name.toLowerCase().includes(userSearch.toLowerCase()) || u.display_name?.toLowerCase().includes(userSearch.toLowerCase()))\n    : users;\n\n  // â•â•â• TABS â•â•â•\n\n  const tabs: { key: AdminTab; label: string; icon: any; badge?: number }[] = [\n    { key: \"overview\", label: \"Visao Geral\", icon: BarChart3 },\n    { key: \"users\", label: \"Membros\", icon: Users, badge: stats?.totalUsers },\n    { key: \"communities\", label: \"Comunidades\", icon: Globe, badge: stats?.totalCommunities },\n    { key: \"events\", label: \"Eventos & Lives\", icon: Calendar, badge: stats?.totalEvents },\n    { key: \"content\", label: \"CMS / Conteudo\", icon: FileText },\n    { key: \"reports\", label: \"Denuncias\", icon: Flag, badge: stats?.pendingReports },\n    { key: \"moderation\", label: \"Moderacao\", icon: Shield },\n    { key: \"badges\", label: \"Badges\", icon: Award },\n    { key: \"invites\", label: \"Convites\", icon: Link2 },\n    { key: \"approvals\", label: \"Aprovacoes\", icon: CheckCircle },\n    { key: \"rituals\", label: \"Rituais\", icon: Flame },\n    { key: \"inbox\", label: \"Caixa de Entrada\", icon: Bell },\n    { key: \"investor\", label: \"Investidor\", icon: TrendingUp },\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-black\">\n      {/* â•â•â• HEADER SOBERANO â•â•â• */}\n      <header className=\"sticky top-0 z-40 bg-gradient-to-r from-[#1a1a2e] via-[#16213e] to-[#0f3460] border-b border-[#C8102E]/30 shadow-lg shadow-[#C8102E]/5\">\n        <div className=\"max-w-7xl mx-auto px-4 py-3 flex items-center gap-3\">\n          <button onClick={onBack} className=\"text-[#81D8D0] hover:text-white transition-colors p-1\">\n            <ArrowLeft className=\"w-5 h-5\" />\n          </button>\n          <div className=\"flex items-center gap-2\">\n            <div className=\"w-8 h-8 rounded-lg bg-gradient-to-br from-[#C8102E] to-[#C8102E]/60 flex items-center justify-center\">\n              <Crown className=\"w-4 h-4 text-white\" />\n            </div>\n            <div>\n              <h1 className=\"text-white font-bold text-lg leading-tight\">Painel Soberano</h1>\n              <p className=\"text-[#81D8D0]/60 text-[10px] leading-tight\">Controle total da plataforma</p>\n            </div>\n          </div>\n          <span className=\"text-xs text-[#C8102E] bg-[#C8102E]/10 border border-[#C8102E]/30 px-2.5 py-1 rounded-full ml-2 font-bold\">\n            super_admin\n          </span>\n          <div className=\"ml-auto flex items-center gap-3\">\n            <div className=\"text-right hidden sm:block\">\n              <p className=\"text-white/60 text-xs\">{seatsUsed}/{seatsTotal} vagas</p>\n              <div className=\"w-20 h-1.5 bg-white/10 rounded-full mt-0.5 overflow-hidden\">\n                <div className=\"h-full bg-[#81D8D0] rounded-full\" style={{ width: `${Math.min(100, (seatsUsed / seatsTotal) * 100)}%` }} />\n              </div>\n            </div>\n          </div>\n        </div>\n      </header>\n\n      <div className=\"max-w-7xl mx-auto px-4 py-6\">\n        {/* â•â•â• TABS com scroll horizontal â•â•â• */}\n        <div className=\"flex gap-1 mb-6 overflow-x-auto pb-2 scrollbar-hide\">\n          {tabs.map((tab) => (\n            <button\n              key={tab.key}\n              onClick={() => setActiveTab(tab.key)}\n              className={`flex items-center gap-2 px-4 py-2.5 text-xs font-semibold border-b-2 whitespace-nowrap transition-all rounded-t-lg ${\n                activeTab === tab.key\n                  ? \"border-[#C8102E] text-[#C8102E] bg-[#C8102E]/5\"\n                  : \"border-transparent text-white/40 hover:text-white/70 hover:bg-white/5\"\n              }`}\n            >\n              <tab.icon className=\"w-4 h-4\" />\n              {tab.label}\n              {tab.badge !== undefined && tab.badge > 0 && (\n                <span className={`text-[10px] px-1.5 py-0.5 rounded-full ${\n                  tab.key === \"reports\" && tab.badge > 0 ? \"bg-[#C8102E] text-white\" : \"bg-white/10 text-white/50\"\n                }`}>{tab.badge}</span>\n              )}\n            </button>\n          ))}\n        </div>\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: VISAO GERAL\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"overview\" && (\n          <div className=\"space-y-6\">\n            {loadingStats ? (\n              <LoadingSpinner />\n            ) : stats && (\n              <>\n                {/* â•â•â• ALERTA CRITICO â€” Protecao infantil / Pedofilia â•â•â• */}\n                {stats.criticalReports > 0 && (\n                  <div\n                    className=\"bg-[#C8102E]/15 border-2 border-[#C8102E]/60 rounded-2xl p-5 flex items-center gap-4 cursor-pointer hover:bg-[#C8102E]/20 transition-colors animate-pulse\"\n                    onClick={() => setActiveTab(\"reports\")}\n                  >\n                    <div className=\"w-12 h-12 rounded-xl bg-[#C8102E]/30 flex items-center justify-center flex-shrink-0\">\n                      <ShieldAlert className=\"w-6 h-6 text-[#C8102E]\" />\n                    </div>\n                    <div className=\"flex-1\">\n                      <h3 className=\"text-[#C8102E] font-bold text-sm uppercase tracking-wide\">\n                        ğŸš¨ {stats.criticalReports} denuncia{stats.criticalReports > 1 ? \"s\" : \"\"} critica{stats.criticalReports > 1 ? \"s\" : \"\"} pendente{stats.criticalReports > 1 ? \"s\" : \"\"}\n                      </h3>\n                      <p className=\"text-white/50 text-xs mt-0.5\">\n                        Protecao infantil ou outro incidente critico requer atencao imediata. Clique para revisar.\n                      </p>\n                    </div>\n                    <Flag className=\"w-5 h-5 text-[#C8102E] flex-shrink-0\" />\n                  </div>\n                )}\n\n                {/* KPI Cards - 2 rows */}\n                <div className=\"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3\">\n                  <KPICard label=\"Membros\" value={stats.totalUsers} icon={Users} color=\"#81D8D0\" />\n                  <KPICard label=\"Posts\" value={stats.totalPosts} icon={MessageSquare} color=\"#81D8D0\" />\n                  <KPICard label=\"Comentarios\" value={stats.totalComments} icon={MessageSquare} color=\"#81D8D0\" />\n                  <KPICard label=\"Comunidades\" value={stats.totalCommunities} icon={Globe} color=\"#81D8D0\" />\n                  <KPICard label=\"Conexoes\" value={stats.activeConnections} icon={Heart} color=\"#81D8D0\" />\n                  <KPICard label=\"Eventos\" value={stats.totalEvents} icon={Calendar} color=\"#81D8D0\" />\n                  <KPICard label=\"Lives\" value={stats.totalLives} icon={Zap} color=\"#C8102E\" />\n                  <KPICard label=\"Mensagens\" value={stats.totalMessages} icon={MessageSquare} color=\"#81D8D0\" />\n                  <KPICard label=\"Denuncias Pendentes\" value={stats.pendingReports} icon={AlertTriangle} color={stats.pendingReports > 0 ? \"#C8102E\" : \"#81D8D0\"} highlight={stats.pendingReports > 0} />\n                  <KPICard label=\"Vagas\" value={`${seatsUsed}/${seatsTotal}`} icon={UserPlus} color=\"#81D8D0\" subtitle={`Real: ${realMax - realRemaining}/${realMax}`} />\n                </div>\n\n                {/* Quick Actions */}\n                <div className=\"bg-white/5 border border-white/10 rounded-2xl p-5\">\n                  <h3 className=\"text-white font-bold mb-4 flex items-center gap-2\">\n                    <Zap className=\"w-4 h-4 text-[#C8102E]\" /> Acoes Rapidas\n                  </h3>\n                  <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-3\">\n                    <QuickAction label=\"Aprovacoes\" icon={UserCheck} onClick={() => setActiveTab(\"approvals\")} />\n                    <QuickAction label=\"Gerenciar Membros\" icon={Users} onClick={() => setActiveTab(\"users\")} />\n                    <QuickAction label=\"Ver Denuncias\" icon={Flag} onClick={() => setActiveTab(\"reports\")} badge={stats.pendingReports} />\n                    <QuickAction label=\"Editar Conteudo\" icon={FileText} onClick={() => setActiveTab(\"content\")} />\n                    <QuickAction label=\"Rituais\" icon={Flame} onClick={() => setActiveTab(\"rituals\")} />\n                    <QuickAction label=\"Caixa de Entrada\" icon={Bell} onClick={() => setActiveTab(\"inbox\")} />\n                    <QuickAction label=\"Dashboard Investidor\" icon={TrendingUp} onClick={() => setActiveTab(\"investor\")} />\n                  </div>\n                </div>\n\n                {/* Ultimas acoes moderativas */}\n                <div className=\"bg-white/5 border border-white/10 rounded-2xl p-5\">\n                  <h3 className=\"text-white font-bold mb-3 flex items-center gap-2\">\n                    <Shield className=\"w-4 h-4 text-[#C8102E]\" /> Ultimas Acoes Moderativas\n                  </h3>\n                  {actionsLoading ? (\n                    <p className=\"text-white/40 text-sm\">Carregando...</p>\n                  ) : actions.length === 0 ? (\n                    <p className=\"text-white/40 text-sm\">Nenhuma acao registrada.</p>\n                  ) : (\n                    <div className=\"space-y-2\">\n                      {actions.slice(0, 8).map((a) => (\n                        <div key={a.id} className=\"flex items-center justify-between bg-white/5 rounded-xl px-4 py-2.5 text-sm\">\n                          <div className=\"flex items-center gap-2\">\n                            <Shield className=\"w-3 h-3 text-[#C8102E]/60\" />\n                            <span className=\"text-white\">{ACTION_TYPE_LABELS[a.action_type as ModerationActionType] || a.action_type}</span>\n                            {a.target_user_name && <span className=\"text-white/40\">â†’ {a.target_user_name}</span>}\n                          </div>\n                          <span className=\"text-white/30 text-xs\">{new Date(a.created_at).toLocaleDateString(\"pt-BR\")}</span>\n                        </div>\n                      ))}\n                    </div>\n                  )}\n                </div>\n\n                {/* Membros recentes */}\n                <div className=\"bg-white/5 border border-white/10 rounded-2xl p-5\">\n                  <h3 className=\"text-white font-bold mb-3 flex items-center gap-2\">\n                    <UserPlus className=\"w-4 h-4 text-[#81D8D0]\" /> Ultimos Membros Cadastrados\n                  </h3>\n                  <RecentMembersWidget onNavigateToProfile={onNavigateToProfile} />\n                </div>\n              </>\n            )}\n          </div>\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: MEMBROS\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"users\" && (\n          <div className=\"space-y-4\">\n            <div className=\"flex flex-wrap gap-3 items-center\">\n              <div className=\"relative flex-1 min-w-[200px]\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-white/30\" />\n                <input\n                  value={userSearch}\n                  onChange={(e) => setUserSearch(e.target.value)}\n                  placeholder=\"Buscar membro...\"\n                  className=\"w-full bg-white/5 border border-white/10 rounded-xl pl-10 pr-4 py-2.5 text-white placeholder:text-white/30 focus:outline-none focus:border-[#81D8D0]/50 text-sm\"\n                />\n              </div>\n              <select\n                value={roleFilter}\n                onChange={(e) => setRoleFilter(e.target.value)}\n                className=\"bg-white/5 border border-white/10 rounded-xl px-3 py-2.5 text-white text-sm focus:outline-none\"\n              >\n                <option value=\"all\">Todos os roles</option>\n                <option value=\"super_admin\">super_admin</option>\n                <option value=\"moderator\">moderator</option>\n                <option value=\"founder_paid\">founder_paid</option>\n                <option value=\"member_paid\">member_paid</option>\n                <option value=\"member_free_legacy\">member_free_legacy</option>\n                <option value=\"registered_unfinished\">registered_unfinished</option>\n                <option value=\"visitor\">visitor</option>\n                <option value=\"banned\">banned</option>\n              </select>\n              <button onClick={loadUsers} className=\"p-2.5 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-colors\">\n                <RefreshCw className=\"w-4 h-4 text-white/60\" />\n              </button>\n            </div>\n\n            {loadingUsers ? (\n              <LoadingSpinner />\n            ) : (\n              <>\n                <div className=\"flex items-center justify-between\">\n                  <p className=\"text-white/40 text-xs\">{filteredUsers.length} membro(s) encontrado(s)</p>\n                  <div className=\"flex gap-2 text-xs\">\n                    {[\"super_admin\", \"moderator\", \"founder_paid\", \"member_paid\", \"member_free_legacy\", \"visitor\"].map(r => {\n                      const count = users.filter(u => u.role === r).length;\n                      if (count === 0) return null;\n                      return (\n                        <span key={r} className=\"px-2 py-0.5 bg-white/5 rounded-full text-white/40\">\n                          {r.replace(\"_\", \" \")}: {count}\n                        </span>\n                      );\n                    })}\n                  </div>\n                </div>\n                <div className=\"space-y-2\">\n                  {filteredUsers.map((u) => (\n                    <div key={u.id} className=\"bg-white/5 border border-white/10 rounded-xl p-4 flex items-center gap-3 hover:border-white/20 transition-colors\">\n                      <UserAvatar name={u.name} photoUrl={u.profile_photo} size=\"md\" onClick={() => onNavigateToProfile?.(u.id)} />\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2\">\n                          <p className=\"text-white font-medium truncate cursor-pointer hover:text-[#81D8D0]\" onClick={() => onNavigateToProfile?.(u.id)}>\n                            {u.display_name || u.name}\n                          </p>\n                          {u.legal_name && (\n                            <span className=\"text-[9px] px-1.5 py-0.5 bg-white/5 text-white/30 rounded\" title=\"Nome legal (privado)\">\n                              {u.legal_name}\n                            </span>\n                          )}\n                          {!u.onboarding_done && <span className=\"text-[9px] px-1.5 py-0.5 bg-amber-500/20 text-amber-400 rounded\">Onboarding pendente</span>}\n                          {(u.role === 'founder_paid' || u.role === 'moderator') && (\n                            u.leadership_onboarding_done\n                              ? <span className=\"text-[9px] px-1.5 py-0.5 bg-[#81D8D0]/20 text-[#81D8D0] rounded flex items-center gap-1\">Lider âœ“</span>\n                              : <span className=\"text-[9px] px-1.5 py-0.5 bg-[#C8102E]/20 text-[#C8102E] rounded\">Onboarding lider pendente</span>\n                          )}\n                        </div>\n                        <div className=\"flex items-center gap-2 text-xs text-white/40 mt-0.5 flex-wrap\">\n                          <RoleBadge role={u.role} />\n                          <span>Score: {u.participation_score}</span>\n                          <span>Desde {new Date(u.created_at).toLocaleDateString(\"pt-BR\")}</span>\n                          {u.last_active_at && <span>Ativo: {new Date(u.last_active_at).toLocaleDateString(\"pt-BR\")}</span>}\n                        </div>\n                        {u.bio && <p className=\"text-white/30 text-xs mt-1 truncate\">{u.bio}</p>}\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <button onClick={() => copyToClipboard(u.id, u.id)} className=\"p-1.5 hover:bg-white/10 rounded-lg transition-colors\" title=\"Copiar ID\">\n                          {copiedId === u.id ? <Check className=\"w-3 h-3 text-[#81D8D0]\" /> : <Copy className=\"w-3 h-3 text-white/30\" />}\n                        </button>\n                        {(u.role === 'founder_paid' || u.role === 'moderator') && u.leadership_onboarding_done && (\n                          <button\n                            onClick={() => resetLeadershipOnboarding(u.id, u.display_name || u.name)}\n                            className=\"p-1.5 hover:bg-[#C8102E]/20 rounded-lg transition-colors\"\n                            title=\"Resetar onboarding de lideranca\"\n                          >\n                            <RefreshCw className=\"w-3 h-3 text-[#C8102E]/60 hover:text-[#C8102E]\" />\n                          </button>\n                        )}\n                        <select\n                          value={u.role}\n                          onChange={(e) => changeUserRole(u.id, e.target.value)}\n                          className=\"bg-white/5 border border-white/10 rounded-lg px-2 py-1.5 text-white text-xs focus:outline-none\"\n                        >\n                          <option value=\"banned\">banned</option>\n                          <option value=\"visitor\">visitor</option>\n                          <option value=\"registered_unfinished\">registered_unfinished</option>\n                          <option value=\"member_free_legacy\">member_free_legacy</option>\n                          <option value=\"member_paid\">member_paid</option>\n                          <option value=\"founder_paid\">founder_paid</option>\n                          <option value=\"moderator\">moderator</option>\n                          <option value=\"super_admin\">super_admin</option>\n                        </select>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </>\n            )}\n          </div>\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: COMUNIDADES\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"communities\" && (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-white font-bold flex items-center gap-2\">\n                <Globe className=\"w-5 h-5 text-[#81D8D0]\" /> {communities.length} Comunidades Ativas\n              </h2>\n            </div>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-3\">\n              {communities.map((c) => (\n                <div key={c.id} className=\"bg-white/5 border border-white/10 rounded-xl p-4 hover:border-[#81D8D0]/30 transition-colors\">\n                  <div className=\"flex items-start gap-3\">\n                    <div className=\"w-10 h-10 rounded-lg flex items-center justify-center text-lg flex-shrink-0\" style={{ background: `${c.config?.color || '#81D8D0'}20` }}>\n                      {c.config?.icon ? <c.config.icon className=\"w-5 h-5\" style={{ color: c.config.color }} /> : <Globe className=\"w-5 h-5 text-[#81D8D0]\" />}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"text-white font-semibold text-sm truncate\">{c.name}</h3>\n                      <p className=\"text-white/40 text-xs mt-0.5 line-clamp-2\">{c.description}</p>\n                      <div className=\"flex items-center gap-3 mt-2 text-xs text-white/30\">\n                        <span className=\"flex items-center gap-1\"><MessageSquare className=\"w-3 h-3\" /> {c.postCount || 0} posts</span>\n                        <span className={`px-1.5 py-0.5 rounded text-[10px] ${c.config?.category === \"core\" ? \"bg-[#C8102E]/20 text-[#C8102E]\" : c.config?.category === \"neuro\" ? \"bg-[#81D8D0]/20 text-[#81D8D0]\" : \"bg-white/10 text-white/50\"}`}>\n                          {c.config?.category || \"outro\"}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n            {communities.length === 0 && (\n              <EmptyState icon={Globe} text=\"Nenhuma comunidade encontrada.\" />\n            )}\n          </div>\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: EVENTOS & LIVES\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"events\" && (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-white font-bold flex items-center gap-2\">\n                <Calendar className=\"w-5 h-5 text-[#81D8D0]\" /> Todos os Eventos\n              </h2>\n              <button onClick={loadEvents} className=\"p-2 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors\">\n                <RefreshCw className=\"w-4 h-4 text-white/60\" />\n              </button>\n            </div>\n            {loadingEvents ? (\n              <LoadingSpinner />\n            ) : events.length === 0 ? (\n              <EmptyState icon={Calendar} text=\"Nenhum evento registrado.\" />\n            ) : (\n              <div className=\"space-y-2\">\n                {events.map((e) => {\n                  const isPast = new Date(e.starts_at) < new Date();\n                  return (\n                    <div key={e.id} className={`bg-white/5 border border-white/10 rounded-xl p-4 ${isPast ? \"opacity-60\" : \"\"}`}>\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className={`text-[10px] px-2 py-0.5 rounded-full font-bold ${\n                              e.event_type === \"live\" ? \"bg-[#C8102E]/20 text-[#C8102E]\" :\n                              e.event_type === \"workshop\" ? \"bg-[#81D8D0]/20 text-[#81D8D0]\" :\n                              \"bg-purple-500/20 text-purple-400\"\n                            }`}>\n                              {EVENT_TYPE_LABELS[e.event_type as keyof typeof EVENT_TYPE_LABELS] || e.event_type}\n                            </span>\n                            <span className={`text-[10px] px-2 py-0.5 rounded-full ${\n                              e.status === \"scheduled\" ? \"bg-[#81D8D0]/10 text-[#81D8D0]\" :\n                              e.status === \"live_now\" ? \"bg-[#C8102E] text-white animate-pulse\" :\n                              \"bg-white/10 text-white/40\"\n                            }`}>{e.status}</span>\n                          </div>\n                          <h3 className=\"text-white font-semibold text-sm\">{e.title}</h3>\n                          <p className=\"text-white/40 text-xs mt-0.5\">{e.description?.slice(0, 100)}</p>\n                          <div className=\"flex items-center gap-3 mt-2 text-xs text-white/30\">\n                            <span>Host: {e.host_name}</span>\n                            <span>{new Date(e.starts_at).toLocaleString(\"pt-BR\", { day: \"2-digit\", month: \"short\", hour: \"2-digit\", minute: \"2-digit\" })}</span>\n                          </div>\n                        </div>\n                        <button onClick={() => deleteEvent(e.id)} className=\"p-2 hover:bg-[#C8102E]/20 rounded-lg transition-colors\" title=\"Excluir\">\n                          <Trash2 className=\"w-4 h-4 text-[#C8102E]/60 hover:text-[#C8102E]\" />\n                        </button>\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: CMS / CONTEUDO\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"content\" && (\n          <div className=\"space-y-6\">\n            {/* Anuncios */}\n            <div>\n              <div className=\"flex items-center justify-between mb-4\">\n                <h2 className=\"text-white font-bold flex items-center gap-2\">\n                  <Megaphone className=\"w-5 h-5 text-[#C8102E]\" /> Anuncios (home_announcements)\n                </h2>\n                <button onClick={loadAnnouncements} className=\"p-2 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors\">\n                  <RefreshCw className=\"w-4 h-4 text-white/60\" />\n                </button>\n              </div>\n              {loadingAnnouncements ? (\n                <LoadingSpinner />\n              ) : announcements.length === 0 ? (\n                <EmptyState icon={Megaphone} text=\"Nenhum anuncio. Crie pelo Supabase Dashboard.\" />\n              ) : (\n                <div className=\"space-y-2\">\n                  {announcements.map(a => (\n                    <div key={a.id} className={`bg-white/5 border rounded-xl p-4 ${a.is_active ? \"border-[#81D8D0]/30\" : \"border-white/10 opacity-50\"}`}>\n                      <div className=\"flex items-start justify-between\">\n                        <div className=\"flex-1 min-w-0\">\n                          <div className=\"flex items-center gap-2 mb-1\">\n                            <span className={`text-[10px] px-2 py-0.5 rounded-full font-bold ${a.is_active ? \"bg-[#81D8D0]/20 text-[#81D8D0]\" : \"bg-white/10 text-white/40\"}`}>\n                              {a.is_active ? \"ATIVO\" : \"INATIVO\"}\n                            </span>\n                            <span className=\"text-[10px] px-2 py-0.5 bg-white/10 text-white/40 rounded-full\">{a.type}</span>\n                            <span className=\"text-[10px] text-white/30\">prioridade: {a.priority}</span>\n                          </div>\n                          <h3 className=\"text-white font-semibold text-sm\">{a.title}</h3>\n                          <p className=\"text-white/40 text-xs mt-0.5 line-clamp-2\">{a.content}</p>\n                        </div>\n                        <button\n                          onClick={() => toggleAnnouncement(a.id, a.is_active)}\n                          className={`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${\n                            a.is_active ? \"bg-[#C8102E]/20 text-[#C8102E] hover:bg-[#C8102E]/30\" : \"bg-[#81D8D0]/20 text-[#81D8D0] hover:bg-[#81D8D0]/30\"\n                          }`}\n                        >\n                          {a.is_active ? \"Desativar\" : \"Ativar\"}\n                        </button>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              )}\n            </div>\n\n            {/* CMS Links */}\n            <div>\n              <h2 className=\"text-white font-bold flex items-center gap-2 mb-4\">\n                <BookOpen className=\"w-5 h-5 text-[#81D8D0]\" /> Tabelas CMS (editar via Supabase)\n              </h2>\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                {[\n                  { table: \"platform_copy\", desc: \"Textos da plataforma (landing, app, admin)\", icon: FileText },\n                  { table: \"home_sections\", desc: \"Secoes da landing page\", icon: Globe },\n                  { table: \"legal_pages\", desc: \"Politicas legais (privacidade, termos, etc.)\", icon: Shield },\n                  { table: \"home_announcements\", desc: \"Anuncios no topo do hub\", icon: Megaphone },\n                ].map(item => (\n                  <a\n                    key={item.table}\n                    href={`https://supabase.com/dashboard/project/ieieohtnaymykxiqnmlc/editor/${item.table}`}\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    className=\"bg-white/5 border border-white/10 rounded-xl p-4 hover:border-[#81D8D0]/30 transition-colors group block\"\n                  >\n                    <div className=\"flex items-center gap-3\">\n                      <item.icon className=\"w-5 h-5 text-[#81D8D0]\" />\n                      <div className=\"flex-1\">\n                        <p className=\"text-white font-semibold text-sm group-hover:text-[#81D8D0] transition-colors\">{item.table}</p>\n                        <p className=\"text-white/40 text-xs\">{item.desc}</p>\n                      </div>\n                      <ExternalLink className=\"w-4 h-4 text-white/20 group-hover:text-[#81D8D0] transition-colors\" />\n                    </div>\n                  </a>\n                ))}\n              </div>\n            </div>\n          </div>\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: DENUNCIAS\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"reports\" && (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-white font-bold flex items-center gap-2\">\n                <Flag className=\"w-5 h-5 text-[#C8102E]\" /> Denuncias ({reports.length})\n              </h2>\n              <button onClick={loadReports} className=\"p-2 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors\">\n                <RefreshCw className=\"w-4 h-4 text-white/60\" />\n              </button>\n            </div>\n            {loadingReports ? (\n              <LoadingSpinner />\n            ) : reports.length === 0 ? (\n              <EmptyState icon={CheckCircle} text=\"Nenhuma denuncia registrada.\" color=\"#81D8D0\" />\n            ) : (\n              <div className=\"space-y-3\">\n                {reports.map((r) => {\n                  const reportConfig = REPORT_TYPE_LABELS[r.report_type as ReportType];\n                  return (\n                    <div key={r.id} className={`bg-white/5 border rounded-xl p-4 ${\n                      r.severity === \"critical\" ? \"border-[#C8102E]/50\" : r.severity === \"high\" ? \"border-amber-500/30\" : \"border-white/10\"\n                    }`}>\n                      <div className=\"flex items-start justify-between mb-2\">\n                        <div className=\"flex items-center gap-2\">\n                          <span className=\"text-lg\">{reportConfig?.icon || \"ğŸ“\"}</span>\n                          <span className=\"text-white font-medium text-sm\">{reportConfig?.label || r.report_type}</span>\n                          <SeverityBadge severity={r.severity} />\n                          <StatusBadge status={r.status} />\n                        </div>\n                        <span className=\"text-white/30 text-xs\">{new Date(r.created_at).toLocaleDateString(\"pt-BR\")}</span>\n                      </div>\n                      <div className=\"text-sm text-white/60 mb-2\">\n                        <span>Denunciante: <strong className=\"text-white/80\">{r.reporter_name}</strong></span>\n                        {r.reported_user_name && <span className=\"ml-3\">Denunciado: <strong className=\"text-white/80\">{r.reported_user_name}</strong></span>}\n                      </div>\n                      {r.description && <p className=\"text-white/50 text-sm mb-3\">{r.description}</p>}\n                      {r.status === \"pending\" && (\n                        <div className=\"flex gap-2\">\n                          <button onClick={() => resolveReport(r.id, \"resolved\")} className=\"flex items-center gap-1 px-3 py-1.5 bg-[#C8102E] text-white rounded-lg text-xs font-medium hover:bg-[#C8102E]/80\">\n                            <CheckCircle className=\"w-3 h-3\" /> Resolver\n                          </button>\n                          <button onClick={() => resolveReport(r.id, \"dismissed\")} className=\"flex items-center gap-1 px-3 py-1.5 bg-white/10 text-white/60 rounded-lg text-xs font-medium hover:bg-white/20\">\n                            <XCircle className=\"w-3 h-3\" /> Dispensar\n                          </button>\n                          {r.reported_user_id && (\n                            <button onClick={() => onNavigateToProfile?.(r.reported_user_id!)} className=\"flex items-center gap-1 px-3 py-1.5 bg-white/5 text-[#81D8D0] rounded-lg text-xs font-medium hover:bg-white/10\">\n                              <Eye className=\"w-3 h-3\" /> Ver perfil\n                            </button>\n                          )}\n                        </div>\n                      )}\n                    </div>\n                  );\n                })}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: MODERACAO\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"moderation\" && (\n          <div className=\"space-y-3\">\n            <h2 className=\"text-white font-bold flex items-center gap-2 mb-4\">\n              <Shield className=\"w-5 h-5 text-[#C8102E]\" /> Log de Moderacao ({actions.length} acoes)\n            </h2>\n            {actionsLoading ? (\n              <LoadingSpinner />\n            ) : actions.length === 0 ? (\n              <EmptyState icon={Shield} text=\"Nenhuma acao moderativa registrada.\" />\n            ) : (\n              actions.map((a) => (\n                <div key={a.id} className={`bg-white/5 border border-white/10 rounded-xl p-4 ${a.reversed_at ? \"opacity-50\" : \"\"}`}>\n                  <div className=\"flex items-center justify-between mb-1\">\n                    <div className=\"flex items-center gap-2\">\n                      <Shield className=\"w-4 h-4 text-[#C8102E]\" />\n                      <span className=\"text-white font-medium text-sm\">{ACTION_TYPE_LABELS[a.action_type as ModerationActionType] || a.action_type}</span>\n                      {a.reversed_at && <span className=\"text-xs bg-amber-500/20 text-amber-400 px-1.5 py-0.5 rounded\">Revertido</span>}\n                    </div>\n                    <span className=\"text-white/30 text-xs\">{new Date(a.created_at).toLocaleDateString(\"pt-BR\", { day: \"2-digit\", month: \"short\", hour: \"2-digit\", minute: \"2-digit\" })}</span>\n                  </div>\n                  <p className=\"text-white/60 text-sm\">{a.reason}</p>\n                  <div className=\"flex items-center gap-3 mt-2 text-xs text-white/30\">\n                    <span>Moderador: {a.moderator_name}</span>\n                    {a.target_user_name && <span>Alvo: {a.target_user_name}</span>}\n                  </div>\n                </div>\n              ))\n            )}\n          </div>\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: BADGES\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"badges\" && (\n          <div className=\"space-y-4\">\n            <h2 className=\"text-white font-bold flex items-center gap-2 mb-4\">\n              <Award className=\"w-5 h-5 text-[#81D8D0]\" /> Sistema de Badges\n            </h2>\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3\">\n              {Object.entries(BADGE_CONFIG).map(([key, badge]) => (\n                <div key={key} className=\"bg-white/5 border border-white/10 rounded-xl p-4 hover:border-[#81D8D0]/30 transition-colors\">\n                  <div className=\"flex items-center gap-3 mb-2\">\n                    <span className=\"text-2xl\">{badge.icon}</span>\n                    <div>\n                      <h3 className=\"text-white font-semibold text-sm\">{badge.label}</h3>\n                      <p className=\"text-white/30 text-[10px] uppercase tracking-wider\">{key}</p>\n                    </div>\n                  </div>\n                  <p className=\"text-white/50 text-xs\">{badge.description}</p>\n                </div>\n              ))}\n            </div>\n            <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\n              <p className=\"text-white/40 text-xs\">\n                Badges sao concedidos automaticamente pelo sistema baseado em atividade.\n                Para gerenciar badges manualmente, use a tabela <code className=\"text-[#81D8D0]\">user_badges</code> no{\" \"}\n                <a href=\"https://supabase.com/dashboard/project/ieieohtnaymykxiqnmlc/editor/user_badges\" target=\"_blank\" rel=\"noopener noreferrer\" className=\"text-[#81D8D0] hover:underline\">\n                  Supabase Dashboard\n                </a>.\n              </p>\n            </div>\n          </div>\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: CONVITES\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"invites\" && (\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <h2 className=\"text-white font-bold flex items-center gap-2\">\n                <Link2 className=\"w-5 h-5 text-[#81D8D0]\" /> Links de Convite\n              </h2>\n              <button\n                onClick={() => createInviteLink(5)}\n                className=\"flex items-center gap-2 px-4 py-2 bg-[#81D8D0] text-black rounded-xl text-xs font-bold hover:bg-[#81D8D0]/90 transition-colors\"\n              >\n                <Plus className=\"w-4 h-4\" /> Criar Convite\n              </button>\n            </div>\n            {invitesLoading ? (\n              <LoadingSpinner />\n            ) : inviteLinks.length === 0 ? (\n              <EmptyState icon={Link2} text=\"Nenhum convite criado ainda.\" />\n            ) : (\n              <div className=\"space-y-2\">\n                {inviteLinks.map(link => (\n                  <div key={link.id} className={`bg-white/5 border rounded-xl p-4 ${link.is_active ? \"border-[#81D8D0]/30\" : \"border-white/10 opacity-50\"}`}>\n                    <div className=\"flex items-center justify-between\">\n                      <div className=\"flex-1 min-w-0\">\n                        <div className=\"flex items-center gap-2 mb-1\">\n                          <code className=\"text-[#81D8D0] text-sm font-mono\">{link.code}</code>\n                          <button onClick={() => copyToClipboard(link.code, link.id)} className=\"p-1 hover:bg-white/10 rounded transition-colors\">\n                            {copiedId === link.id ? <Check className=\"w-3 h-3 text-[#81D8D0]\" /> : <Copy className=\"w-3 h-3 text-white/30\" />}\n                          </button>\n                          <span className={`text-[10px] px-2 py-0.5 rounded-full font-bold ${link.is_active ? \"bg-[#81D8D0]/20 text-[#81D8D0]\" : \"bg-white/10 text-white/40\"}`}>\n                            {link.is_active ? \"ATIVO\" : \"INATIVO\"}\n                          </span>\n                        </div>\n                        <div className=\"flex items-center gap-3 text-xs text-white/40\">\n                          <span>Usos: {link.uses_count}/{link.max_uses}</span>\n                          <span>Criado: {new Date(link.created_at).toLocaleDateString(\"pt-BR\")}</span>\n                          {link.expires_at && <span>Expira: {new Date(link.expires_at).toLocaleDateString(\"pt-BR\")}</span>}\n                        </div>\n                      </div>\n                      <button\n                        onClick={() => deactivateLink(link.id)}\n                        className={`px-3 py-1.5 rounded-lg text-xs font-medium transition-colors ${\n                          link.is_active ? \"bg-[#C8102E]/20 text-[#C8102E] hover:bg-[#C8102E]/30\" : \"bg-[#81D8D0]/20 text-[#81D8D0] hover:bg-[#81D8D0]/30\"\n                        }`}\n                      >\n                        {link.is_active ? \"Desativar\" : \"Desativado\"}\n                      </button>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            )}\n          </div>\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: APROVACOES â€” Fase 5\n            Dois painÃ©is: (1) Novos cadastros (registered_unfinished)\n                          (2) Pedidos de entrada em comunidades (community_members)\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"approvals\" && (\n          <ApprovalsPanel\n            onNavigateToProfile={onNavigateToProfile}\n            logAction={logAction}\n            refreshSeats={refreshSeats}\n            communities={communities}\n          />\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: RITUAIS â€” Fase 2: CRUD de Desafios Diarios\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"rituals\" && (\n          <RituaisPanel />\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: CAIXA DE ENTRADA â€” contact_requests\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"inbox\" && (\n          <InboxPanel />\n        )}\n\n        {/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n            TAB: DASHBOARD INVESTIDOR â€” Camada 9\n        â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */}\n        {activeTab === \"investor\" && (\n          <InvestorDashboard />\n        )}\n      </div>\n    </div>\n  );\n}\n\n// â•â•â• SUBCOMPONENTS â•â•â•\n\nfunction KPICard({ label, value, icon: Icon, color, subtitle, highlight }: { label: string; value: number | string; icon: any; color: string; subtitle?: string; highlight?: boolean }) {\n  return (\n    <div className={`bg-white/5 border rounded-xl p-4 transition-all ${highlight ? \"border-[#C8102E]/50 bg-[#C8102E]/5\" : \"border-white/10\"}`}>\n      <div className=\"flex items-center justify-between mb-2\">\n        <Icon className=\"w-4 h-4\" style={{ color }} />\n        {highlight && <span className=\"w-2 h-2 rounded-full bg-[#C8102E] animate-pulse\" />}\n      </div>\n      <p className=\"text-2xl font-bold\" style={{ color }}>{value}</p>\n      <p className=\"text-white/40 text-xs mt-1\">{label}</p>\n      {subtitle && <p className=\"text-white/25 text-[10px] mt-0.5\">{subtitle}</p>}\n    </div>\n  );\n}\n\nfunction QuickAction({ label, icon: Icon, onClick, badge }: { label: string; icon: any; onClick: () => void; badge?: number }) {\n  return (\n    <button\n      onClick={onClick}\n      className=\"flex items-center gap-2 px-4 py-3 bg-white/5 border border-white/10 rounded-xl hover:border-[#81D8D0]/30 hover:bg-white/8 transition-all text-left\"\n    >\n      <Icon className=\"w-4 h-4 text-[#81D8D0]\" />\n      <span className=\"text-white text-xs font-medium\">{label}</span>\n      {badge !== undefined && badge > 0 && (\n        <span className=\"ml-auto text-[10px] px-1.5 py-0.5 rounded-full bg-[#C8102E] text-white font-bold\">{badge}</span>\n      )}\n    </button>\n  );\n}\n\nfunction RoleBadge({ role }: { role: string }) {\n  const colors: Record<string, string> = {\n    super_admin: \"bg-[#C8102E]/20 text-[#C8102E]\",\n    moderator: \"bg-purple-500/20 text-purple-400\",\n    founder_paid: \"bg-amber-500/20 text-amber-400\",\n    member_paid: \"bg-[#81D8D0]/20 text-[#81D8D0]\",\n    member_free_legacy: \"bg-blue-500/20 text-blue-400\",\n    visitor: \"bg-white/10 text-white/40\",\n    banned: \"bg-red-500/20 text-red-400\",\n  };\n  return <span className={`px-1.5 py-0.5 rounded text-[10px] font-medium ${colors[role] || \"bg-white/10 text-white/50\"}`}>{role}</span>;\n}\n\nfunction SeverityBadge({ severity }: { severity: string }) {\n  const cls = severity === \"critical\" ? \"bg-[#C8102E]/20 text-[#C8102E]\" : severity === \"high\" ? \"bg-amber-500/20 text-amber-400\" : \"bg-white/10 text-white/50\";\n  return <span className={`text-xs px-1.5 py-0.5 rounded ${cls}`}>{severity}</span>;\n}\n\nfunction StatusBadge({ status }: { status: string }) {\n  const cls = status === \"pending\" ? \"bg-amber-500/20 text-amber-400\" : status === \"resolved\" ? \"bg-green-500/20 text-green-400\" : \"bg-white/10 text-white/40\";\n  return <span className={`text-xs px-1.5 py-0.5 rounded ${cls}`}>{status}</span>;\n}\n\nfunction LoadingSpinner() {\n  return (\n    <div className=\"flex justify-center py-12\">\n      <div className=\"w-8 h-8 border-2 border-[#C8102E] border-t-transparent rounded-full animate-spin\" />\n    </div>\n  );\n}\n\nfunction EmptyState({ icon: Icon, text, color = \"#fff\" }: { icon: any; text: string; color?: string }) {\n  return (\n    <div className=\"text-center py-12 bg-white/5 rounded-2xl border border-white/10\">\n      <Icon className=\"w-10 h-10 mx-auto mb-3 opacity-30\" style={{ color }} />\n      <p className=\"text-white/60 text-sm\">{text}</p>\n    </div>\n  );\n}\n\nfunction RecentMembersWidget({ onNavigateToProfile }: { onNavigateToProfile?: (id: string) => void }) {\n  const [recent, setRecent] = useState<AdminUser[]>([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function load() {\n      try {\n        const { data } = await supabase.from(\"users\").select(\"id, name, display_name, legal_name, role, profile_photo, created_at, last_active_at, is_public_profile, participation_score, bio, onboarding_done, leadership_onboarding_done\").order(\"created_at\", { ascending: false }).limit(5);\n        setRecent((data || []) as AdminUser[]);\n      } catch (err) {\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    }\n    load();\n  }, []);\n\n  if (loading) return <p className=\"text-white/40 text-sm\">Carregando...</p>;\n\n  return (\n    <div className=\"space-y-2\">\n      {recent.map(u => (\n        <div key={u.id} className=\"flex items-center gap-3 bg-white/5 rounded-xl px-4 py-2.5\">\n          <UserAvatar name={u.name} photoUrl={u.profile_photo} size=\"sm\" onClick={() => onNavigateToProfile?.(u.id)} />\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-white text-sm font-medium truncate cursor-pointer hover:text-[#81D8D0]\" onClick={() => onNavigateToProfile?.(u.id)}>{u.name}</p>\n            <div className=\"flex items-center gap-2\">\n              <RoleBadge role={u.role} />\n              <span className=\"text-white/30 text-xs\">{new Date(u.created_at).toLocaleDateString(\"pt-BR\")}</span>\n            </div>\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n}\n\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n// APPROVALS PANEL â€” Fase 5: Central de AprovaÃ§Ãµes\n// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•\n\ninterface CommunityMemberRequest {\n  id: string;\n  community_id: string;\n  user_id: string;\n  status: string;\n  request_message: string | null;\n  created_at: string;\n  user_name?: string;\n  user_photo?: string | null;\n  community_name?: string;\n}\n\nfunction ApprovalsPanel({\n  onNavigateToProfile,\n  logAction,\n  refreshSeats,\n  communities,\n}: {\n  onNavigateToProfile?: (userId: string) => void;\n  logAction: (params: { targetUserId?: string; actionType: string; reason: string }) => Promise<void>;\n  refreshSeats: () => Promise<void>;\n  communities: CommunityWithMeta[];\n}) {\n  const [pendingUsers, setPendingUsers] = useState<AdminUser[]>([]);\n  const [communityRequests, setCommunityRequests] = useState<CommunityMemberRequest[]>([]);\n  const [loadingUsers, setLoadingUsers] = useState(true);\n  const [loadingCommunity, setLoadingCommunity] = useState(true);\n  const [processingId, setProcessingId] = useState<string | null>(null);\n\n  const loadPendingUsers = useCallback(async () => {\n    setLoadingUsers(true);\n    try {\n      const { data, error } = await supabase\n        .from(\"users\")\n        .select(\"id, name, display_name, legal_name, role, profile_photo, created_at, last_active_at, is_public_profile, participation_score, bio, onboarding_done, leadership_onboarding_done\")\n        .eq(\"role\", \"registered_unfinished\")\n        .order(\"created_at\", { ascending: true });\n      if (error) throw error;\n      setPendingUsers((data || []) as AdminUser[]);\n    } catch (err) {\n      console.error(\"[Approvals] Erro ao carregar usuarios pendentes:\", err);\n    } finally {\n      setLoadingUsers(false);\n    }\n  }, []);\n\n  const loadCommunityRequests = useCallback(async () => {\n    setLoadingCommunity(true);\n    try {\n      const { data, error } = await supabase\n        .from(\"community_members\")\n        .select(\"*\")\n        .eq(\"status\", \"pending\")\n        .order(\"created_at\", { ascending: true });\n\n      if (error) {\n        if (error.code === \"42P01\" || error.message?.includes(\"does not exist\") || error.message?.includes(\"relation\")) {\n          console.info(\"[Approvals] Tabela community_members ainda nao existe.\");\n        } else {\n          throw error;\n        }\n        setCommunityRequests([]);\n      } else {\n        const requests = data || [];\n        if (requests.length > 0) {\n          const userIds = [...new Set(requests.map((r: any) => r.user_id))];\n          const { data: usersData } = await supabase.from(\"users\").select(\"id, name, profile_photo\").in(\"id\", userIds);\n          const usersMap: Record<string, { name: string; photo: string | null }> = {};\n          (usersData || []).forEach((u: any) => { usersMap[u.id] = { name: u.name, photo: u.profile_photo }; });\n          const commMap: Record<string, string> = {};\n          communities.forEach(c => { commMap[c.id] = c.name; });\n          setCommunityRequests(requests.map((r: any) => ({\n            ...r,\n            user_name: usersMap[r.user_id]?.name || \"Desconhecido\",\n            user_photo: usersMap[r.user_id]?.photo || null,\n            community_name: commMap[r.community_id] || r.community_id,\n          })));\n        } else {\n          setCommunityRequests([]);\n        }\n      }\n    } catch (err) {\n      console.error(\"[Approvals] Erro ao carregar pedidos:\", err);\n      setCommunityRequests([]);\n    } finally {\n      setLoadingCommunity(false);\n    }\n  }, [communities]);\n\n  useEffect(() => { loadPendingUsers(); }, [loadPendingUsers]);\n  useEffect(() => { loadCommunityRequests(); }, [loadCommunityRequests]);\n\n  const approveUser = async (userId: string) => {\n    setProcessingId(userId);\n    try {\n      await supabase.from(\"users\").update({ role: \"member_free_legacy\", access_released: true }).eq(\"id\", userId);\n      await logAction({ targetUserId: userId, actionType: \"warning\", reason: \"Cadastro aprovado. Role: member_free_legacy.\" });\n      await refreshSeats();\n      await loadPendingUsers();\n    } catch (err) { console.error(\"[Approvals] Erro ao aprovar:\", err); }\n    finally { setProcessingId(null); }\n  };\n\n  const rejectUser = async (userId: string) => {\n    if (!confirm(\"Rejeitar este cadastro?\")) return;\n    setProcessingId(userId);\n    try {\n      await supabase.from(\"users\").update({ role: \"visitor\", access_released: false }).eq(\"id\", userId);\n      await logAction({ targetUserId: userId, actionType: \"warning\", reason: \"Cadastro rejeitado. Role: visitor.\" });\n      await loadPendingUsers();\n    } catch (err) { console.error(\"[Approvals] Erro ao rejeitar:\", err); }\n    finally { setProcessingId(null); }\n  };\n\n  const approveCommunityMember = async (reqId: string, userId: string, commName: string) => {\n    setProcessingId(reqId);\n    try {\n      await supabase.from(\"community_members\").update({ status: \"approved\" }).eq(\"id\", reqId);\n      await logAction({ targetUserId: userId, actionType: \"warning\", reason: `Entrada aprovada: \"${commName}\".` });\n      await loadCommunityRequests();\n    } catch (err) { console.error(\"[Approvals] Erro:\", err); }\n    finally { setProcessingId(null); }\n  };\n\n  const rejectCommunityMember = async (reqId: string, userId: string, commName: string) => {\n    setProcessingId(reqId);\n    try {\n      await supabase.from(\"community_members\").update({ status: \"rejected\" }).eq(\"id\", reqId);\n      await logAction({ targetUserId: userId, actionType: \"warning\", reason: `Entrada rejeitada: \"${commName}\".` });\n      await loadCommunityRequests();\n    } catch (err) { console.error(\"[Approvals] Erro:\", err); }\n    finally { setProcessingId(null); }\n  };\n\n  return (\n    <div className=\"space-y-8\">\n      {/* PAINEL 1: Novos Cadastros */}\n      <div>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-white font-bold flex items-center gap-2\">\n            <UserCheck className=\"w-5 h-5 text-[#81D8D0]\" /> Novos Cadastros Pendentes\n            {pendingUsers.length > 0 && <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-[#C8102E] text-white font-bold animate-pulse\">{pendingUsers.length}</span>}\n          </h2>\n          <button onClick={loadPendingUsers} className=\"p-2 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors\">\n            <RefreshCw className=\"w-4 h-4 text-white/60\" />\n          </button>\n        </div>\n        <p className=\"text-white/30 text-xs mb-4\">\n          Usuarios com role <code className=\"text-amber-400\">registered_unfinished</code> â€” na Sala de Espera.\n        </p>\n        {loadingUsers ? <LoadingSpinner /> : pendingUsers.length === 0 ? (\n          <EmptyState icon={CheckCircle} text=\"Nenhum cadastro pendente.\" color=\"#81D8D0\" />\n        ) : (\n          <div className=\"space-y-3\">\n            {pendingUsers.map((u) => (\n              <div key={u.id} className=\"bg-white/5 border border-amber-500/30 rounded-xl p-4 flex items-center gap-3\">\n                <UserAvatar name={u.name} photoUrl={u.profile_photo} size=\"md\" onClick={() => onNavigateToProfile?.(u.id)} />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <p className=\"text-white font-medium truncate cursor-pointer hover:text-[#81D8D0]\" onClick={() => onNavigateToProfile?.(u.id)}>{u.display_name || u.name}</p>\n                    <span className=\"text-[9px] px-1.5 py-0.5 bg-amber-500/20 text-amber-400 rounded font-bold\">AGUARDANDO</span>\n                  </div>\n                  <div className=\"flex items-center gap-2 text-xs text-white/40 mt-0.5\">\n                    <Clock className=\"w-3 h-3\" />\n                    <span>{new Date(u.created_at).toLocaleDateString(\"pt-BR\", { day: \"2-digit\", month: \"short\", year: \"numeric\", hour: \"2-digit\", minute: \"2-digit\" })}</span>\n                  </div>\n                  {u.bio && <p className=\"text-white/30 text-xs mt-1 truncate\">{u.bio}</p>}\n                </div>\n                <div className=\"flex items-center gap-2 flex-shrink-0\">\n                  <button onClick={() => approveUser(u.id)} disabled={processingId === u.id} className=\"flex items-center gap-1 px-4 py-2 bg-[#81D8D0] text-black rounded-lg text-xs font-bold hover:bg-[#81D8D0]/90 disabled:opacity-50 transition-colors\">\n                    <CheckCircle className=\"w-3.5 h-3.5\" /> Aprovar\n                  </button>\n                  <button onClick={() => rejectUser(u.id)} disabled={processingId === u.id} className=\"flex items-center gap-1 px-4 py-2 bg-[#C8102E]/20 text-[#C8102E] rounded-lg text-xs font-bold hover:bg-[#C8102E]/30 disabled:opacity-50 transition-colors\">\n                    <XCircle className=\"w-3.5 h-3.5\" /> Rejeitar\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n\n      {/* PAINEL 2: Pedidos em Comunidades */}\n      <div>\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-white font-bold flex items-center gap-2\">\n            <Globe className=\"w-5 h-5 text-[#81D8D0]\" /> Pedidos de Entrada em Comunidades\n            {communityRequests.length > 0 && <span className=\"text-[10px] px-2 py-0.5 rounded-full bg-amber-500 text-black font-bold\">{communityRequests.length}</span>}\n          </h2>\n          <button onClick={loadCommunityRequests} className=\"p-2 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 transition-colors\">\n            <RefreshCw className=\"w-4 h-4 text-white/60\" />\n          </button>\n        </div>\n        <p className=\"text-white/30 text-xs mb-4\">\n          Pedidos para comunidades com <code className=\"text-amber-400\">requires_approval</code>. Requer tabela <code className=\"text-[#81D8D0]\">community_members</code>.\n        </p>\n        {loadingCommunity ? <LoadingSpinner /> : communityRequests.length === 0 ? (\n          <EmptyState icon={Globe} text=\"Nenhum pedido de entrada pendente.\" color=\"#81D8D0\" />\n        ) : (\n          <div className=\"space-y-3\">\n            {communityRequests.map((req) => (\n              <div key={req.id} className=\"bg-white/5 border border-[#81D8D0]/20 rounded-xl p-4 flex items-center gap-3\">\n                <UserAvatar name={req.user_name || \"?\"} photoUrl={req.user_photo} size=\"md\" onClick={() => onNavigateToProfile?.(req.user_id)} />\n                <div className=\"flex-1 min-w-0\">\n                  <div className=\"flex items-center gap-2\">\n                    <p className=\"text-white font-medium truncate cursor-pointer hover:text-[#81D8D0]\" onClick={() => onNavigateToProfile?.(req.user_id)}>{req.user_name}</p>\n                    <span className=\"text-[9px] px-1.5 py-0.5 bg-[#81D8D0]/20 text-[#81D8D0] rounded font-bold\">{req.community_name}</span>\n                  </div>\n                  {req.request_message && <p className=\"text-white/50 text-xs mt-1 italic\">\"{req.request_message}\"</p>}\n                  <div className=\"flex items-center gap-2 text-xs text-white/30 mt-0.5\">\n                    <Clock className=\"w-3 h-3\" />\n                    <span>{new Date(req.created_at).toLocaleDateString(\"pt-BR\", { day: \"2-digit\", month: \"short\", hour: \"2-digit\", minute: \"2-digit\" })}</span>\n                  </div>\n                </div>\n                <div className=\"flex items-center gap-2 flex-shrink-0\">\n                  <button onClick={() => approveCommunityMember(req.id, req.user_id, req.community_name || \"\")} disabled={processingId === req.id} className=\"flex items-center gap-1 px-4 py-2 bg-[#81D8D0] text-black rounded-lg text-xs font-bold hover:bg-[#81D8D0]/90 disabled:opacity-50 transition-colors\">\n                    <CheckCircle className=\"w-3.5 h-3.5\" /> Aprovar\n                  </button>\n                  <button onClick={() => rejectCommunityMember(req.id, req.user_id, req.community_name || \"\")} disabled={processingId === req.id} className=\"flex items-center gap-1 px-4 py-2 bg-[#C8102E]/20 text-[#C8102E] rounded-lg text-xs font-bold hover:bg-[#C8102E]/30 disabled:opacity-50 transition-colors\">\n                    <XCircle className=\"w-3.5 h-3.5\" /> Rejeitar\n                  </button>\n                </div>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"
}