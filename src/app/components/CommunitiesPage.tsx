{
  "lote": 4,
  "status": "pending",
  "file_path": "src/app/components/CommunitiesPage.tsx",
  "created_at": "2026-02-27T05:36:19.413Z",
  "file_content": "import { useState } from \"react\";\nimport { motion } from \"motion/react\";\nimport { ArrowLeft, Users, MessageCircle, Lock, Search, ShieldCheck, Crown, Sparkles } from \"lucide-react\";\nimport { useCommunitiesContext, useProfileContext } from \"../../lib\";\nimport { MILA_ACTIVE_COMMUNITIES } from \"../../lib/communitiesConfig\";\nimport type { CommunityWithMeta } from \"../../lib\";\n\ninterface CommunitiesPageProps {\n  onBack: () => void;\n  onSelectCommunity?: (community: CommunityWithMeta) => void;\n}\n\ntype FilterType = 'all' | 'active' | 'awaiting' | 'core' | 'neuro' | 'social' | 'build';\n\nexport function CommunitiesPage({ onBack, onSelectCommunity }: CommunitiesPageProps) {\n  const { communities, isLoading } = useCommunitiesContext();\n  const { user } = useProfileContext();\n  const [filter, setFilter] = useState<FilterType>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const activeCommunities = communities.filter(c => MILA_ACTIVE_COMMUNITIES.includes(c.name));\n  const awaitingCommunities = communities.filter(c => !MILA_ACTIVE_COMMUNITIES.includes(c.name));\n\n  const filteredCommunities = communities.filter(c => {\n    const isActive = MILA_ACTIVE_COMMUNITIES.includes(c.name);\n    const matchesFilter =\n      filter === 'all' ||\n      (filter === 'active' && isActive) ||\n      (filter === 'awaiting' && !isActive) ||\n      c.config.category === filter;\n    const matchesSearch = searchQuery === '' ||\n      c.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      c.description.toLowerCase().includes(searchQuery.toLowerCase());\n    return matchesFilter && matchesSearch;\n  });\n\n  // Ordenar: ativas primeiro\n  const sortedCommunities = [...filteredCommunities].sort((a, b) => {\n    const aActive = MILA_ACTIVE_COMMUNITIES.includes(a.name) ? 0 : 1;\n    const bActive = MILA_ACTIVE_COMMUNITIES.includes(b.name) ? 0 : 1;\n    return aActive - bActive;\n  });\n\n  const totalPosts = communities.reduce((sum, c) => sum + c.postCount, 0);\n\n  return (\n    <div className=\"min-h-screen bg-black\">\n      {/* Header */}\n      <div className=\"w-full bg-[#35363A] border-b border-white/10 sticky top-0 z-40\">\n        <div className=\"mx-auto max-w-[1100px] px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <button onClick={onBack} className=\"flex items-center gap-2 text-white/80 hover:text-[#81D8D0] transition-colors\">\n              <ArrowLeft className=\"h-5 w-5\" />\n              <span className=\"font-medium\">Voltar</span>\n            </button>\n            <h1 className=\"text-xl font-semibold text-white\">Comunidades</h1>\n            <div className=\"w-24\"></div>\n          </div>\n        </div>\n      </div>\n\n      {/* Conte√∫do */}\n      <div className=\"mx-auto max-w-[1100px] px-6 py-8\">\n        {/* Hero Section */}\n        <motion.div\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ duration: 0.6 }}\n          className=\"mb-10\"\n        >\n          <div className=\"bg-gradient-to-br from-[#35363A] to-black border border-white/10 rounded-2xl p-8 text-center\">\n            <Users className=\"h-12 w-12 text-[#81D8D0] mx-auto mb-4\" />\n            <h2 className=\"text-3xl md:text-4xl font-semibold text-white mb-4\">\n              Comunidades NeuroConex√£o\n            </h2>\n            <p className=\"text-lg md:text-xl text-white/80 font-normal leading-relaxed max-w-3xl mx-auto mb-8\">\n              Cada comunidade tem um prop√≥sito claro. N√£o √© \"tudo para todos\" ‚Äî √© precis√£o intencional.\n              Voc√™ n√£o precisa estar em todas, apenas nas que fazem sentido para voc√™.\n            </p>\n\n            {/* Stats */}\n            <div className=\"grid grid-cols-3 gap-6 max-w-2xl mx-auto\">\n              <div>\n                <p className=\"text-3xl font-semibold text-[#81D8D0] mb-1\">{activeCommunities.length}</p>\n                <p className=\"text-sm text-white/60\">Abertas</p>\n              </div>\n              <div>\n                <p className=\"text-3xl font-semibold text-[#FF6B35] mb-1\">{totalPosts}</p>\n                <p className=\"text-sm text-white/60\">Posts Totais</p>\n              </div>\n              <div>\n                <p className=\"text-3xl font-semibold text-white/40 mb-1\">{awaitingCommunities.length}</p>\n                <p className=\"text-sm text-white/60\">Aguardando Fundador</p>\n              </div>\n            </div>\n          </div>\n        </motion.div>\n\n        {/* Busca */}\n        <div className=\"mb-6\">\n          <div className=\"relative max-w-md\">\n            <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-5 w-5 text-white/40\" />\n            <input\n              type=\"text\"\n              value={searchQuery}\n              onChange={(e) => setSearchQuery(e.target.value)}\n              placeholder=\"Buscar comunidade...\"\n              className=\"w-full pl-10 pr-4 py-2.5 bg-white/5 border border-white/10 rounded-xl text-white placeholder:text-white/40 focus:outline-none focus:ring-2 focus:ring-[#81D8D0] focus:border-transparent\"\n            />\n          </div>\n        </div>\n\n        {/* Filtros */}\n        <div className=\"flex items-center gap-2 mb-8 overflow-x-auto pb-2\">\n          {[\n            { key: 'all', label: 'Todas', count: communities.length },\n            { key: 'active', label: 'üü¢ Abertas', count: activeCommunities.length },\n            { key: 'awaiting', label: 'üîí Aguardando', count: awaitingCommunities.length },\n            { key: 'core', label: 'Intelecto', count: communities.filter(c => c.config.category === 'core').length },\n            { key: 'social', label: 'Corpo & Rela√ß√µes', count: communities.filter(c => c.config.category === 'social').length },\n            { key: 'neuro', label: 'Neuro', count: communities.filter(c => c.config.category === 'neuro').length },\n            { key: 'build', label: 'Constru√ß√£o', count: communities.filter(c => c.config.category === 'build').length },\n          ].map((f) => (\n            <button\n              key={f.key}\n              onClick={() => setFilter(f.key as FilterType)}\n              className={`px-4 py-2 rounded-xl text-sm font-semibold whitespace-nowrap transition-all ${\n                filter === f.key\n                  ? 'bg-[#81D8D0] text-black shadow-lg'\n                  : 'bg-white/5 border border-white/10 text-white hover:bg-white/10'\n              }`}\n            >\n              {f.label} ({f.count})\n            </button>\n          ))}\n        </div>\n\n        {/* Loading */}\n        {isLoading && (\n          <div className=\"text-center py-16\">\n            <div className=\"w-12 h-12 border-4 border-[#81D8D0] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-white/60\">Carregando comunidades...</p>\n          </div>\n        )}\n\n        {/* Grid de Comunidades */}\n        {!isLoading && (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12\">\n            {sortedCommunities.map((community, index) => {\n              const isActive = MILA_ACTIVE_COMMUNITIES.includes(community.name);\n              const IconComponent = community.config.icon;\n\n              return (\n                <motion.div\n                  key={community.id}\n                  initial={{ opacity: 0, y: 30 }}\n                  animate={{ opacity: 1, y: 0 }}\n                  transition={{ duration: 0.4, delay: index * 0.05 }}\n                  onClick={() => onSelectCommunity?.(community)}\n                  className={`border-2 rounded-2xl p-6 transition-all group ${\n                    onSelectCommunity ? 'cursor-pointer hover:scale-[1.02]' : ''\n                  } ${isActive\n                    ? 'bg-white/5 border-[#81D8D0]/30 hover:border-[#81D8D0]/60'\n                    : 'bg-white/2 border-white/10 hover:border-white/20'\n                  }`}\n                >\n                  {/* Header */}\n                  <div className=\"flex items-start gap-4 mb-4\">\n                    <div\n                      className=\"w-14 h-14 rounded-xl flex items-center justify-center flex-shrink-0\"\n                      style={{\n                        backgroundColor: `${community.config.color}20`,\n                        border: `2px solid ${community.config.color}40`\n                      }}\n                    >\n                      <IconComponent className=\"h-6 w-6\" style={{ color: community.config.color }} />\n                    </div>\n\n                    <div className=\"flex-1 min-w-0\">\n                      <h3 className=\"text-lg font-semibold text-white group-hover:text-[#81D8D0] transition-colors truncate\">\n                        {community.name}\n                      </h3>\n                      <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\n                        {isActive ? (\n                          <span className=\"px-2 py-0.5 rounded text-xs font-bold bg-[#81D8D0]/20 text-[#81D8D0] flex items-center gap-1\">\n                            <Sparkles className=\"h-3 w-3\" /> Aberta\n                          </span>\n                        ) : (\n                          <span className=\"px-2 py-0.5 rounded text-xs font-semibold bg-white/10 text-white/40 flex items-center gap-1\">\n                            <Lock className=\"h-3 w-3\" /> Aguardando fundador\n                          </span>\n                        )}\n                        <span className=\"text-xs text-white/30 capitalize\">\n                          {community.config.category === 'core' ? 'Intelecto' : community.config.category === 'neuro' ? 'Neuro' : community.config.category === 'build' ? 'Constru√ß√£o' : 'Corpo & Rela√ß√µes'}\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  {/* Descri√ß√£o */}\n                  <p className=\"text-sm text-white/70 font-normal leading-relaxed mb-5 line-clamp-3\">\n                    {community.description}\n                  </p>\n\n                  {/* Stats */}\n                  <div className=\"flex items-center gap-4 text-sm text-white/40\">\n                    <div className=\"flex items-center gap-1.5\">\n                      <MessageCircle className=\"h-4 w-4\" />\n                      <span>{community.postCount} posts</span>\n                    </div>\n                    {isActive && (\n                      <div className=\"flex items-center gap-1.5 text-[#81D8D0]\">\n                        <ShieldCheck className=\"h-4 w-4\" />\n                        <span className=\"text-xs\">Moderada por Mila</span>\n                      </div>\n                    )}\n                  </div>\n                </motion.div>\n              );\n            })}\n          </div>\n        )}\n\n        {/* Regras */}\n        <motion.div\n          initial={{ opacity: 0, y: 30 }}\n          whileInView={{ opacity: 1, y: 0 }}\n          viewport={{ once: true }}\n          transition={{ duration: 0.6 }}\n          className=\"space-y-6\"\n        >\n          {/* Aviso sobre fundadores */}\n          <div className=\"bg-white/5 border border-white/10 rounded-2xl p-6\">\n            <h3 className=\"text-xl font-semibold text-white mb-3 flex items-center gap-2\">\n              <Crown className=\"h-5 w-5 text-[#FF6B35]\" /> Quer ser Fundador(a)?\n            </h3>\n            <p className=\"text-sm text-white/60 leading-relaxed mb-3\">\n              Comunidades marcadas como \"Aguardando Fundador\" precisam de algu√©m para liderar.\n              Fundadores criam suas pr√≥prias comunidades, moderam o conte√∫do e organizam eventos.\n              Toda funda√ß√£o passa pela aprova√ß√£o da criadora da plataforma.\n            </p>\n            <p className=\"text-xs text-white/40\">\n              Interessado(a)? Entre em contato pelo seu perfil ou pela √°rea de mensagens.\n            </p>\n          </div>\n\n          {/* Regras Gerais */}\n          <div className=\"bg-[#C8102E]/10 border border-[#C8102E]/30 rounded-2xl p-6\">\n            <h3 className=\"text-xl font-semibold text-white mb-3\">Regras Gerais</h3>\n            <ul className=\"space-y-2 text-sm text-white/80 font-normal\">\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-[#C8102E] font-bold mt-0.5\">‚Ä¢</span>\n                <span>Modera√ß√£o ativa em todas as comunidades. Den√∫ncias s√£o levadas a s√©rio.</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-[#C8102E] font-bold mt-0.5\">‚Ä¢</span>\n                <span>Respeite limites. \"Falar direto\" n√£o √© desculpa para viol√™ncia.</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-[#C8102E] font-bold mt-0.5\">‚Ä¢</span>\n                <span>S√≥ acessa quem √© membro aceito pela moderadora, fundadora ou administra√ß√£o.</span>\n              </li>\n              <li className=\"flex items-start gap-2\">\n                <span className=\"text-[#C8102E] font-bold mt-0.5\">‚Ä¢</span>\n                <span>Cada comunidade tem regras espec√≠ficas. Leia o manifesto antes de postar.</span>\n              </li>\n            </ul>\n          </div>\n        </motion.div>\n      </div>\n    </div>\n  );\n}\n"
}