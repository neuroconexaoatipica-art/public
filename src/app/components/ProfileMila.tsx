{
  "lote": 4,
  "status": "pending",
  "file_path": "src/app/components/ProfileMila.tsx",
  "created_at": "2026-02-27T05:36:18.915Z",
  "file_content": "import { useState, useEffect } from \"react\";\nimport { motion } from \"motion/react\";\nimport { ArrowLeft, Calendar, Edit, Users, Trash2, VolumeX, Globe, Lock, ImageIcon, Brain, Heart, MessageCircle, Sparkles, Instagram, Link2, Flame, Zap } from \"lucide-react\";\nimport { useProfileContext, usePosts, supabase, useCommunitiesContext, useProfileVisits, useBadges, useRitualLogs, runBadgeEngine } from \"../../lib\";\nimport type { User } from \"../../lib\";\nimport { EditProfileModal } from \"./EditProfileModal\";\nimport { DeleteAccountModal } from \"./DeleteAccountModal\";\nimport { PostCard } from \"./PostCard\";\nimport { UserAvatar } from \"./UserAvatar\";\nimport { ConnectionButton } from \"./ConnectionButton\";\nimport { ProfileVisitsBadge } from \"./ProfileVisitsBadge\";\nimport { TestimonialCard } from \"./TestimonialCard\";\nimport { BadgeDisplay } from \"./BadgeDisplay\";\n\ninterface ProfileMilaProps {\n  onBack: () => void;\n  viewUserId?: string | null;\n  onNavigateToProfile?: (userId: string) => void;\n}\n\nexport function ProfileMila({ onBack, viewUserId, onNavigateToProfile }: ProfileMilaProps) {\n  const { user: currentUser, isLoading: currentLoading, refreshProfile } = useProfileContext();\n  const [viewedUser, setViewedUser] = useState<User | null>(null);\n  const [isLoadingViewed, setIsLoadingViewed] = useState(false);\n  const [isEditModalOpen, setIsEditModalOpen] = useState(false);\n  const [isDeleteModalOpen, setIsDeleteModalOpen] = useState(false);\n  const { communities } = useCommunitiesContext();\n  const { registerVisit } = useProfileVisits();\n\n  // Mapa de ID -> nome da comunidade (para exibir nos posts)\n  const communityNameMap: Record<string, string> = {};\n  communities.forEach(c => { communityNameMap[c.id] = c.name; });\n\n  // Determinar se estamos vendo NOSSO perfil ou de OUTRO usuario\n  const isOwnProfile = !viewUserId || viewUserId === currentUser?.id;\n  const displayUser = isOwnProfile ? currentUser : viewedUser;\n  const isLoading = isOwnProfile ? currentLoading : isLoadingViewed;\n\n  // v1.1: Badges do usuario exibido\n  const { badges, refreshBadges } = useBadges(displayUser?.id);\n\n  // Ritual stats do usuario exibido\n  const { stats: ritualStats } = useRitualLogs(displayUser?.id);\n\n  // Motor de gamificacao invisivel — roda silenciosamente no proprio perfil\n  useEffect(() => {\n    if (isOwnProfile && currentUser?.id) {\n      runBadgeEngine(currentUser.id).then(({ granted }) => {\n        if (granted.length > 0) refreshBadges();\n      });\n    }\n  }, [isOwnProfile, currentUser?.id]);\n\n  // ID seguro para buscar posts\n  const safeAuthorId = displayUser?.id || null;\n\n  // Carregar posts do usuario exibido\n  const { posts, isLoading: postsLoading, isLoadingMore, hasMore, loadMore, refreshPosts } = usePosts(\n    safeAuthorId ? { authorId: safeAuthorId } : { authorId: '__skip__' }\n  );\n\n  const displayPosts = safeAuthorId ? posts : [];\n  const isPostsLoading = safeAuthorId ? postsLoading : false;\n\n  // Carregar perfil de outro usuario + registrar visita\n  useEffect(() => {\n    if (viewUserId && viewUserId !== currentUser?.id) {\n      loadViewedUser(viewUserId);\n      registerVisit(viewUserId);\n    }\n  }, [viewUserId, currentUser?.id, registerVisit]);\n\n  const loadViewedUser = async (userId: string) => {\n    setIsLoadingViewed(true);\n    try {\n      const { data, error } = await supabase\n        .from('users')\n        .select('*')\n        .eq('id', userId)\n        .single();\n\n      if (error) throw error;\n      setViewedUser(data);\n    } catch (err) {\n      console.error('Erro ao carregar perfil:', err);\n    } finally {\n      setIsLoadingViewed(false);\n    }\n  };\n\n  const getRoleLabel = (role: string) => {\n    const roles: Record<string, string> = {\n      super_admin: 'Admin',\n      founder_paid: 'Fundadora',\n      moderator: 'Moderador(a)',\n      member_free_legacy: 'Membro Beta',\n      member_paid: 'Membro',\n      founder: 'Fundadora',\n      admin: 'Admin',\n      member: 'Membro',\n      visitor: 'Visitante'\n    };\n    return roles[role] || 'Membro';\n  };\n\n  const getMemberSince = (createdAt: string) => {\n    try {\n      const date = new Date(createdAt);\n      const months = ['Janeiro', 'Fevereiro', 'Marco', 'Abril', 'Maio', 'Junho',\n        'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];\n      return `${months[date.getMonth()]} ${date.getFullYear()}`;\n    } catch {\n      return 'Fevereiro 2026';\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-black\">\n      {/* Header */}\n      <div className=\"w-full bg-[#35363A] border-b border-white/10 sticky top-0 z-40\">\n        <div className=\"mx-auto max-w-[1000px] px-6 py-4\">\n          <div className=\"flex items-center justify-between\">\n            <button\n              onClick={onBack}\n              className=\"flex items-center gap-2 text-white/80 hover:text-[#81D8D0] transition-colors\"\n            >\n              <ArrowLeft className=\"h-5 w-5\" />\n              <span className=\"font-medium\">Voltar</span>\n            </button>\n\n            <h1 className=\"text-xl font-semibold text-white\">\n              {isOwnProfile ? 'Meu Perfil' : 'Perfil'}\n            </h1>\n            <div className=\"w-24\"></div>\n          </div>\n        </div>\n      </div>\n\n      {/* Loading State */}\n      {isLoading && (\n        <div className=\"flex items-center justify-center min-h-[400px]\">\n          <div className=\"text-center\">\n            <div className=\"w-12 h-12 border-4 border-[#81D8D0] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n            <p className=\"text-white/60\">Carregando perfil...</p>\n          </div>\n        </div>\n      )}\n\n      {/* Conteudo do Perfil */}\n      {!isLoading && displayUser && (\n        <div className=\"mx-auto max-w-[1000px] px-6 py-8\">\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ duration: 0.6 }}\n          >\n            {/* Card do Perfil */}\n            <div className=\"bg-white/3 border border-white/10 rounded-2xl overflow-hidden mb-8\">\n              {/* Cover/Banner */}\n              <div className=\"h-48 bg-gradient-to-br from-[#81D8D0] via-[#35363A] to-[#C8102E]\"></div>\n\n              {/* Informacoes do Perfil */}\n              <div className=\"px-8 pb-8\">\n                {/* Foto de Perfil + Botao */}\n                <div className=\"relative -mt-16 mb-6 flex items-end gap-4\">\n                  <div className=\"w-32 h-32 rounded-full border-4 border-black overflow-hidden flex-shrink-0\">\n                    <UserAvatar\n                      name={displayUser.name}\n                      photoUrl={displayUser.profile_photo}\n                      size=\"xl\"\n                      className=\"!w-full !h-full !rounded-none\"\n                    />\n                  </div>\n                  \n                  {isOwnProfile ? (\n                    <button \n                      className=\"mb-2 px-4 py-2 bg-[#81D8D0] rounded-xl hover:bg-[#81D8D0]/90 transition-colors shadow-lg flex items-center gap-2 text-black font-semibold text-sm\" \n                      onClick={() => setIsEditModalOpen(true)}\n                    >\n                      <Edit className=\"h-4 w-4\" />\n                      Editar perfil\n                    </button>\n                  ) : currentUser && (\n                    <ConnectionButton targetUserId={displayUser.id} />\n                  )}\n                </div>\n\n                {/* Nome e Bio */}\n                <div className=\"mb-6\">\n                  <div className=\"flex items-start justify-between mb-3\">\n                    <div>\n                      <h1 className=\"text-3xl font-semibold text-white mb-1\">\n                        {displayUser.display_name || displayUser.name}\n                        {displayUser.pronouns && (\n                          <span className=\"text-base font-normal text-white/40 ml-2\">({displayUser.pronouns})</span>\n                        )}\n                      </h1>\n                      <p className=\"text-lg text-[#81D8D0] font-medium\">\n                        @{(displayUser.display_name || displayUser.name).toLowerCase().replace(/\\s+/g, '')} · {getRoleLabel(displayUser.role)}\n                      </p>\n                    </div>\n                    {(displayUser.role === 'founder_paid' || displayUser.role === 'super_admin' || displayUser.role === 'founder' || displayUser.role === 'admin') && (\n                      <span className=\"px-4 py-2 bg-[#81D8D0]/20 border border-[#81D8D0]/40 rounded-full text-sm font-semibold text-[#81D8D0]\">\n                        {getRoleLabel(displayUser.role)}\n                      </span>\n                    )}\n                  </div>\n\n                  {/* Bio do usuario */}\n                  <div className=\"space-y-4 text-base text-white/90 font-normal leading-relaxed mb-4\">\n                    {displayUser.bio ? (\n                      <p className=\"whitespace-pre-wrap\">{displayUser.bio}</p>\n                    ) : isOwnProfile ? (\n                      <p className=\"text-white/50 italic\">\n                        Voce ainda nao adicionou uma bio. Clique em \"Editar perfil\" para contar um pouco sobre voce.\n                      </p>\n                    ) : (\n                      <p className=\"text-white/50 italic\">\n                        Este membro ainda nao adicionou uma bio.\n                      </p>\n                    )}\n                  </div>\n\n                  {/* Badges/Tags */}\n                  <div className=\"flex flex-wrap gap-2 mb-6\">\n                    {/* v1.1: Badges do sistema */}\n                    {badges.length > 0 && (\n                      <BadgeDisplay badges={badges} />\n                    )}\n                    {badges.length === 0 && (\n                      <span className=\"px-3 py-1.5 bg-[#81D8D0]/20 border border-[#81D8D0]/40 rounded-lg text-sm font-medium text-white\">\n                        {getRoleLabel(displayUser.role)}\n                      </span>\n                    )}\n                    {displayUser.role === 'founder_paid' && (\n                      <>\n                        <span className=\"px-3 py-1.5 bg-[#FF6B35]/20 border border-[#FF6B35]/40 rounded-lg text-sm font-medium text-white\">\n                          Moderadora\n                        </span>\n                        <span className=\"px-3 py-1.5 bg-[#C8102E]/20 border border-[#C8102E]/40 rounded-lg text-sm font-medium text-white\">\n                          Curadoria Etica\n                        </span>\n                      </>\n                    )}\n                  </div>\n\n                  {/* Ritual streak & activity */}\n                  {ritualStats.totalCompleted > 0 && (\n                    <div className=\"mb-6 flex flex-wrap gap-3\">\n                      {ritualStats.consecutiveWeeks > 0 && (\n                        <div className=\"flex items-center gap-2 px-3 py-2 bg-[#FF6B35]/10 border border-[#FF6B35]/25 rounded-xl\">\n                          <Flame className=\"h-4 w-4 text-[#FF6B35]\" />\n                          <div>\n                            <p className=\"text-xs text-[#FF6B35] font-bold\">{ritualStats.consecutiveWeeks} {ritualStats.consecutiveWeeks === 1 ? 'semana' : 'semanas'} ativa{ritualStats.consecutiveWeeks > 1 ? 's' : ''}</p>\n                            <p className=\"text-[10px] text-white/30\">Constancia nos rituais</p>\n                          </div>\n                        </div>\n                      )}\n                      <div className=\"flex items-center gap-2 px-3 py-2 bg-white/5 border border-white/10 rounded-xl\">\n                        <Zap className=\"h-4 w-4 text-[#81D8D0]\" />\n                        <div>\n                          <p className=\"text-xs text-white/70 font-bold\">{ritualStats.totalCompleted} rituais completados</p>\n                          <p className=\"text-[10px] text-white/30\">Total de presencas</p>\n                        </div>\n                      </div>\n                    </div>\n                  )}\n\n                  {/* v1.1: Deep Statement — \"O que te atravessa\" */}\n                  {displayUser.deep_statement && displayUser.deep_statement_public && (\n                    <div className=\"mb-6 p-4 bg-[#C8102E]/5 border border-[#C8102E]/20 rounded-xl\">\n                      <p className=\"text-xs text-[#C8102E] font-semibold uppercase tracking-wide mb-2\">\n                        O que me atravessa\n                      </p>\n                      <p className=\"text-white/90 italic font-normal leading-relaxed\" style={{ fontFamily: 'Lora, serif' }}>\n                        \"{displayUser.deep_statement}\"\n                      </p>\n                    </div>\n                  )}\n                  {isOwnProfile && displayUser.deep_statement && !displayUser.deep_statement_public && (\n                    <div className=\"mb-6 p-4 bg-white/3 border border-white/10 rounded-xl\">\n                      <p className=\"text-xs text-white/40 font-semibold uppercase tracking-wide mb-2\">\n                        O que me atravessa (privado — so voce ve)\n                      </p>\n                      <p className=\"text-white/60 italic font-normal leading-relaxed\" style={{ fontFamily: 'Lora, serif' }}>\n                        \"{displayUser.deep_statement}\"\n                      </p>\n                    </div>\n                  )}\n\n                  {/* v1.3: O que me acalma */}\n                  {displayUser.calming_statement && displayUser.calming_statement_public && (\n                    <div className=\"mb-6 p-4 bg-[#81D8D0]/5 border border-[#81D8D0]/20 rounded-xl\">\n                      <p className=\"text-xs text-[#81D8D0] font-semibold uppercase tracking-wide mb-2\">\n                        <Heart className=\"h-3 w-3 inline mr-1\" />\n                        O que me acalma\n                      </p>\n                      <p className=\"text-white/90 italic font-normal leading-relaxed\" style={{ fontFamily: 'Lora, serif' }}>\n                        \"{displayUser.calming_statement}\"\n                      </p>\n                    </div>\n                  )}\n                  {isOwnProfile && displayUser.calming_statement && !displayUser.calming_statement_public && (\n                    <div className=\"mb-6 p-4 bg-white/3 border border-white/10 rounded-xl\">\n                      <p className=\"text-xs text-white/40 font-semibold uppercase tracking-wide mb-2\">\n                        O que me acalma (privado — so voce ve)\n                      </p>\n                      <p className=\"text-white/60 italic font-normal leading-relaxed\" style={{ fontFamily: 'Lora, serif' }}>\n                        \"{displayUser.calming_statement}\"\n                      </p>\n                    </div>\n                  )}\n\n                  {/* v1.3: Neurodivergencias */}\n                  {displayUser.neurodivergences && displayUser.neurodivergences.length > 0 && displayUser.neurodivergences_public && (\n                    <div className=\"mb-6\">\n                      <p className=\"text-xs text-[#81D8D0] font-semibold uppercase tracking-wide mb-2 flex items-center gap-1\">\n                        <Brain className=\"h-3 w-3\" />\n                        Neurodivergencias\n                      </p>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {displayUser.neurodivergences.map((nd) => (\n                          <span key={nd} className=\"px-3 py-1.5 bg-[#81D8D0]/10 border border-[#81D8D0]/25 rounded-lg text-xs font-medium text-[#81D8D0]\">\n                            {nd}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n                  {isOwnProfile && displayUser.neurodivergences && displayUser.neurodivergences.length > 0 && !displayUser.neurodivergences_public && (\n                    <div className=\"mb-6\">\n                      <p className=\"text-xs text-white/40 font-semibold uppercase tracking-wide mb-2 flex items-center gap-1\">\n                        <Brain className=\"h-3 w-3\" />\n                        Neurodivergencias (privado — so voce ve)\n                      </p>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {displayUser.neurodivergences.map((nd) => (\n                          <span key={nd} className=\"px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs font-medium text-white/40\">\n                            {nd}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* v1.3: Estilo de comunicacao */}\n                  {displayUser.communication_style && displayUser.communication_style.length > 0 && (\n                    <div className=\"mb-6\">\n                      <p className=\"text-xs text-[#FF6B35] font-semibold uppercase tracking-wide mb-2 flex items-center gap-1\">\n                        <MessageCircle className=\"h-3 w-3\" />\n                        Como me comunicar\n                      </p>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {displayUser.communication_style.map((style) => (\n                          <span key={style} className=\"px-3 py-1.5 bg-[#FF6B35]/10 border border-[#FF6B35]/25 rounded-lg text-xs font-medium text-[#FF6B35]\">\n                            {style}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* v1.3: Interesses */}\n                  {displayUser.interests && displayUser.interests.length > 0 && (\n                    <div className=\"mb-6\">\n                      <p className=\"text-xs text-white/60 font-semibold uppercase tracking-wide mb-2 flex items-center gap-1\">\n                        <Sparkles className=\"h-3 w-3\" />\n                        Interesses\n                      </p>\n                      <div className=\"flex flex-wrap gap-2\">\n                        {displayUser.interests.map((interest) => (\n                          <span key={interest} className=\"px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs font-medium text-white/60\">\n                            {interest}\n                          </span>\n                        ))}\n                      </div>\n                    </div>\n                  )}\n\n                  {/* v1.3: Links sociais */}\n                  {(displayUser.social_instagram || displayUser.social_link) && (\n                    <div className=\"mb-6 flex flex-wrap gap-3\">\n                      {displayUser.social_instagram && (\n                        <a\n                          href={`https://instagram.com/${displayUser.social_instagram.replace('@', '')}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/60 hover:text-[#81D8D0] hover:border-[#81D8D0]/30 transition-colors\"\n                        >\n                          <Instagram className=\"h-3.5 w-3.5\" />\n                          {displayUser.social_instagram}\n                        </a>\n                      )}\n                      {displayUser.social_link && (\n                        <a\n                          href={displayUser.social_link.startsWith('http') ? displayUser.social_link : `https://${displayUser.social_link}`}\n                          target=\"_blank\"\n                          rel=\"noopener noreferrer\"\n                          className=\"flex items-center gap-1.5 px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-xs text-white/60 hover:text-[#81D8D0] hover:border-[#81D8D0]/30 transition-colors\"\n                        >\n                          <Link2 className=\"h-3.5 w-3.5\" />\n                          Link\n                        </a>\n                      )}\n                    </div>\n                  )}\n\n                  {/* Meta Info */}\n                  <div className=\"flex flex-wrap items-center gap-4 text-sm text-white/70\">\n                    <div className=\"flex items-center gap-2\">\n                      <Calendar className=\"h-4 w-4 text-[#81D8D0]\" />\n                      <span>Membro desde {getMemberSince(displayUser.created_at)}</span>\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <Users className=\"h-4 w-4 text-[#81D8D0]\" />\n                      <span>{displayPosts.length} {displayPosts.length === 1 ? 'post' : 'posts'}</span>\n                    </div>\n                    {/* Indicadores de privacidade (so o proprio usuario ve) */}\n                    {isOwnProfile && (\n                      <>\n                        <div className=\"flex items-center gap-1.5\">\n                          {displayUser.is_public_profile ? (\n                            <><Globe className=\"h-3.5 w-3.5 text-[#81D8D0]\" /><span className=\"text-xs text-[#81D8D0]\">Perfil publico</span></>\n                          ) : (\n                            <><Lock className=\"h-3.5 w-3.5 text-white/40\" /><span className=\"text-xs text-white/40\">Perfil privado</span></>\n                          )}\n                        </div>\n                        {displayUser.is_anonymous_mode && (\n                          <div className=\"flex items-center gap-1.5\">\n                            <VolumeX className=\"h-3.5 w-3.5 text-[#C8102E]\" />\n                            <span className=\"text-xs text-[#C8102E]\">Modo silencio ativo</span>\n                          </div>\n                        )}\n                      </>\n                    )}\n                  </div>\n                </div>\n              </div>\n            </div>\n\n            {/* ═══ GALERIA DE FOTOS ═══ */}\n            {displayUser.gallery_photos && displayUser.gallery_photos.length > 0 && (\n              <div className=\"mb-8\">\n                <h2 className=\"text-lg font-semibold text-white mb-4 flex items-center gap-2\">\n                  <ImageIcon className=\"h-5 w-5 text-[#81D8D0]\" />\n                  Fotos\n                </h2>\n                <div className=\"grid grid-cols-3 gap-3\">\n                  {displayUser.gallery_photos.map((url, idx) => (\n                    <motion.div\n                      key={idx}\n                      initial={{ opacity: 0, scale: 0.95 }}\n                      animate={{ opacity: 1, scale: 1 }}\n                      transition={{ delay: idx * 0.1 }}\n                      className=\"aspect-square rounded-xl overflow-hidden border border-white/10 hover:border-[#81D8D0]/30 transition-colors\"\n                    >\n                      <img src={url} alt={`Foto ${idx + 1}`} className=\"w-full h-full object-cover\" />\n                    </motion.div>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            {/* === SECOES SOCIAIS: Visitas + Reconhecimentos === */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8\">\n              {/* Quem visitou meu perfil — so dono ve */}\n              {isOwnProfile && displayUser && (\n                <ProfileVisitsBadge\n                  userId={displayUser.id}\n                  isOwnProfile={true}\n                  onNavigateToProfile={onNavigateToProfile}\n                />\n              )}\n\n              {/* Reconhecimentos (depoimentos) */}\n              {displayUser && (\n                <div className={isOwnProfile ? \"\" : \"md:col-span-2\"}>\n                  <TestimonialCard\n                    targetUserId={displayUser.id}\n                    currentUserId={currentUser?.id}\n                    onNavigateToProfile={onNavigateToProfile}\n                  />\n                </div>\n              )}\n            </div>\n\n            {/* Posts do Usuario */}\n            <div className=\"mb-8\">\n              <h2 className=\"text-2xl font-semibold text-white mb-6\">\n                {isOwnProfile ? 'Seus Posts' : `Posts de ${displayUser.name}`}\n              </h2>\n\n              <div className=\"space-y-6\">\n                {isPostsLoading ? (\n                  <div className=\"text-center py-12\">\n                    <div className=\"w-12 h-12 border-4 border-[#81D8D0] border-t-transparent rounded-full animate-spin mx-auto mb-4\"></div>\n                    <p className=\"text-white/60\">Carregando posts...</p>\n                  </div>\n                ) : displayPosts.length === 0 ? (\n                  <div className=\"bg-white/3 border border-white/10 rounded-2xl p-12 text-center\">\n                    <p className=\"text-xl text-white/60 mb-2\">\n                      {isOwnProfile ? 'Voce ainda nao publicou nada' : `${displayUser.name} ainda nao publicou nada`}\n                    </p>\n                    <p className=\"text-sm text-white/40\">\n                      {isOwnProfile ? 'Va ao Social Hub para criar seu primeiro post!' : 'Os posts aparecerao aqui quando publicados.'}\n                    </p>\n                  </div>\n                ) : (\n                  displayPosts.map((post) => (\n                    <PostCard\n                      key={post.id}\n                      post={post}\n                      currentUserId={currentUser?.id}\n                      onDelete={isOwnProfile ? refreshPosts : undefined}\n                      onAuthorClick={onNavigateToProfile}\n                      communityName={post.community ? communityNameMap[post.community] : undefined}\n                    />\n                  ))\n                )}\n              </div>\n\n              {/* Botao para carregar mais posts */}\n              {hasMore && (\n                <div className=\"text-center mt-4\">\n                  <button\n                    onClick={loadMore}\n                    className=\"px-4 py-2 bg-[#81D8D0] rounded-xl hover:bg-[#81D8D0]/90 transition-colors shadow-lg text-black font-semibold text-sm\"\n                    disabled={isLoadingMore}\n                  >\n                    {isLoadingMore ? 'Carregando...' : 'Carregar mais'}\n                  </button>\n                </div>\n              )}\n            </div>\n\n            {/* Zona de Perigo — Excluir Conta (apenas para o proprio perfil) */}\n            {isOwnProfile && (\n              <div className=\"mt-12 pt-8 border-t border-white/10\">\n                <div className=\"bg-[#C8102E]/5 border border-[#C8102E]/20 rounded-2xl p-6\">\n                  <div className=\"flex items-center justify-between flex-wrap gap-4\">\n                    <div>\n                      <h3 className=\"text-lg font-semibold text-white mb-1\">Excluir minha conta</h3>\n                      <p className=\"text-sm text-white/50\">\n                        Remove permanentemente sua conta e todos os dados associados.\n                      </p>\n                    </div>\n                    <button\n                      onClick={() => setIsDeleteModalOpen(true)}\n                      className=\"flex items-center gap-2 px-5 py-2.5 bg-[#C8102E]/20 border border-[#C8102E]/40 text-[#C8102E] rounded-xl font-semibold text-sm hover:bg-[#C8102E]/30 transition-all\"\n                    >\n                      <Trash2 className=\"h-4 w-4\" />\n                      Excluir conta\n                    </button>\n                  </div>\n                </div>\n              </div>\n            )}\n          </motion.div>\n        </div>\n      )}\n\n      {/* Modal de Edicao de Perfil */}\n      {displayUser && isOwnProfile && (\n        <EditProfileModal \n          isOpen={isEditModalOpen} \n          onClose={() => setIsEditModalOpen(false)}\n          currentUser={displayUser}\n          onProfileUpdated={() => {\n            refreshProfile();\n            refreshPosts();\n          }}\n        />\n      )}\n\n      {/* Modal de Exclusao de Conta */}\n      {displayUser && isOwnProfile && (\n        <DeleteAccountModal \n          isOpen={isDeleteModalOpen} \n          onClose={() => setIsDeleteModalOpen(false)}\n          userName={displayUser.name}\n        />\n      )}\n    </div>\n  );\n}"
}