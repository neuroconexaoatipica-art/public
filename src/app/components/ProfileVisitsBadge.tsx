{
  "lote": 4,
  "status": "pending",
  "file_path": "src/app/components/ProfileVisitsBadge.tsx",
  "created_at": "2026-02-27T05:36:24.475Z",
  "file_content": "import { motion } from \"motion/react\";\nimport { Eye } from \"lucide-react\";\nimport { useProfileVisits } from \"../../lib\";\nimport { UserAvatar } from \"./UserAvatar\";\n\ninterface ProfileVisitsBadgeProps {\n  userId: string;\n  isOwnProfile: boolean;\n  onNavigateToProfile?: (userId: string) => void;\n}\n\nexport function ProfileVisitsBadge({ userId, isOwnProfile, onNavigateToProfile }: ProfileVisitsBadgeProps) {\n  const { visits, visitCount, isLoading } = useProfileVisits(userId);\n\n  if (isLoading || (!isOwnProfile && visitCount === 0)) return null;\n\n  // Só o dono do perfil vê quem visitou\n  if (!isOwnProfile) return null;\n\n  return (\n    <motion.div\n      initial={{ opacity: 0, y: 10 }}\n      animate={{ opacity: 1, y: 0 }}\n      className=\"bg-white/3 border border-white/8 rounded-xl p-4\"\n    >\n      <div className=\"flex items-center gap-2 mb-3\">\n        <Eye className=\"h-4 w-4 text-[#81D8D0]\" />\n        <h3 className=\"text-white text-sm\" style={{ fontWeight: 700 }}>\n          Quem visitou seu perfil\n        </h3>\n        {visitCount > 0 && (\n          <span className=\"ml-auto text-[10px] px-2 py-0.5 bg-[#81D8D0]/15 text-[#81D8D0] rounded-full\" style={{ fontWeight: 700 }}>\n            {visitCount} esta semana\n          </span>\n        )}\n      </div>\n\n      {visitCount === 0 ? (\n        <p className=\"text-white/25 text-xs\">Nenhuma visita recente ao seu perfil.</p>\n      ) : (\n        <div className=\"space-y-2\">\n          {visits.slice(0, 5).map((v) => (\n            <button\n              key={v.id}\n              onClick={() => onNavigateToProfile?.(v.visitor_id)}\n              className=\"w-full flex items-center gap-2.5 px-3 py-2 rounded-lg hover:bg-white/5 transition-colors text-left\"\n            >\n              <UserAvatar name={v.visitor_data?.name || \"?\"} photoUrl={v.visitor_data?.profile_photo} size={28} />\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-white text-xs truncate\" style={{ fontWeight: 600 }}>\n                  {v.visitor_data?.name || \"Membro\"}\n                </p>\n              </div>\n              <span className=\"text-white/20 text-[10px]\">\n                {timeAgo(v.visited_at)}\n              </span>\n            </button>\n          ))}\n          {visitCount > 5 && (\n            <p className=\"text-white/25 text-[10px] text-center pt-1\">\n              +{visitCount - 5} visitas\n            </p>\n          )}\n        </div>\n      )}\n    </motion.div>\n  );\n}\n\nfunction timeAgo(dateStr: string): string {\n  const diff = Date.now() - new Date(dateStr).getTime();\n  const mins = Math.floor(diff / 60000);\n  if (mins < 60) return `${mins}min`;\n  const hours = Math.floor(mins / 60);\n  if (hours < 24) return `${hours}h`;\n  const days = Math.floor(hours / 24);\n  return `${days}d`;\n}"
}