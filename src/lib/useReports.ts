{
  "lote": 0,
  "status": "pending",
  "file_path": "src/lib/useReports.ts",
  "created_at": "2026-02-27T05:36:07.934Z",
  "file_content": "import { useState, useCallback } from 'react';\nimport { supabase } from './supabase';\n\nexport type ReportType = 'harassment' | 'hate_speech' | 'sexual_content' | 'child_safety' |\n  'spam' | 'impersonation' | 'self_harm' | 'violence' | 'inappropriate_content' | 'privacy_violation' | 'other';\n\nexport const REPORT_TYPE_LABELS: Record<ReportType, { label: string; severity: string; icon: string }> = {\n  child_safety:         { label: 'Protecao infantil / Pedofilia', severity: 'critical', icon: 'ðŸš¨' },\n  harassment:           { label: 'Assedio / Perseguicao', severity: 'high', icon: 'âš ï¸' },\n  hate_speech:          { label: 'Discurso de odio', severity: 'high', icon: 'ðŸš«' },\n  sexual_content:       { label: 'Conteudo sexual nao-consentido', severity: 'high', icon: 'ðŸ”ž' },\n  violence:             { label: 'Violencia / Ameaca', severity: 'high', icon: 'ðŸ’€' },\n  self_harm:            { label: 'Autolesao / Suicidio', severity: 'high', icon: 'ðŸ†˜' },\n  impersonation:        { label: 'Falsa identidade', severity: 'medium', icon: 'ðŸŽ­' },\n  spam:                 { label: 'Spam / Propaganda', severity: 'low', icon: 'ðŸ“¢' },\n  inappropriate_content:{ label: 'Conteudo inadequado', severity: 'medium', icon: 'ðŸ‘Ž' },\n  privacy_violation:    { label: 'Violacao de privacidade', severity: 'medium', icon: 'ðŸ”’' },\n  other:                { label: 'Outro', severity: 'medium', icon: 'ðŸ“' },\n};\n\nexport function useReports() {\n  const [isSubmitting, setIsSubmitting] = useState(false);\n\n  const submitReport = useCallback(async (params: {\n    reportedUserId?: string;\n    reportedContentId?: string;\n    reportedContentType?: string;\n    reportType: ReportType;\n    description?: string;\n  }) => {\n    setIsSubmitting(true);\n    try {\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) return { success: false, error: 'Nao autenticado' };\n\n      const severity = params.reportType === 'child_safety' ? 'critical'\n        : ['harassment', 'hate_speech', 'sexual_content', 'violence', 'self_harm'].includes(params.reportType) ? 'high'\n        : 'medium';\n\n      const { error } = await supabase.from('reports').insert({\n        reporter_id: user.id,\n        reported_user_id: params.reportedUserId || null,\n        reported_content_id: params.reportedContentId || null,\n        reported_content_type: params.reportedContentType || null,\n        report_type: params.reportType,\n        severity,\n        description: params.description || null,\n      });\n\n      if (error) throw error;\n      return { success: true };\n    } catch (err: any) {\n      return { success: false, error: err.message };\n    } finally {\n      setIsSubmitting(false);\n    }\n  }, []);\n\n  return { submitReport, isSubmitting };\n}\n"
}